<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA WebGen - Cr√©ateur de Sites Web Automatis√©</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-5px); transition: transform 0.3s ease; }
        .fade-in { animation: fadeIn 0.8s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .preview-section { display: none; }
        .auth-section { display: none; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto; }
        .notification { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1001; display: none; }
        .share-widget { position: fixed; bottom: 20px; right: 20px; z-index: 100; }
        .quality-templates { display: none; }
        .photo-upload-area { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 20px; text-align: center; transition: all 0.3s; }
        .photo-upload-area:hover { border-color: #3b82f6; background-color: #f0f9ff; }
        .photo-upload-area.drag-over { border-color: #10b981; background-color: #f0fdf4; }
        .template-card { cursor: pointer; transition: all 0.3s; }
        .template-card:hover { transform: scale(1.05); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .template-card.selected { border: 3px solid #10b981; }
    </style>
</head>
<body class="font-sans">
    
    <!-- Notification -->
    <div id="notification" class="notification bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
        <span id="notificationText">Message</span>
    </div>

    <!-- Widget de partage -->
    <div class="share-widget">
        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full shadow-lg p-3 relative">
            <button onclick="toggleShareMenu()" class="flex items-center space-x-2 text-sm font-medium">
                <i class="fas fa-share-alt"></i>
                <span>Partager = -10%</span>
            </button>
            <div id="shareMenu" class="hidden absolute bottom-full right-0 mb-2 bg-white rounded-lg shadow-xl p-3 min-w-48">
                <p class="text-gray-800 text-xs font-bold mb-2">üéÅ Partagez et √©conomisez 10% !</p>
                <div class="flex gap-2">
                    <button onclick="shareOnFacebook()" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700 text-xs">
                        <i class="fab fa-facebook-f"></i>
                    </button>
                    <button onclick="shareOnTwitter()" class="bg-blue-400 text-white p-2 rounded hover:bg-blue-500 text-xs">
                        <i class="fab fa-twitter"></i>
                    </button>
                    <button onclick="shareOnWhatsApp()" class="bg-green-500 text-white p-2 rounded hover:bg-green-600 text-xs">
                        <i class="fab fa-whatsapp"></i>
                    </button>
                    <button onclick="copyLink()" class="bg-gray-600 text-white p-2 rounded hover:bg-gray-700 text-xs">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
                <p class="text-gray-600 text-xs mt-2">Code: SHARE10</p>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="gradient-bg text-white py-4 fade-in">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center flex-wrap">
                <h1 class="text-2xl font-bold">ü§ñ IA WebGen</h1>
                <div class="flex items-center gap-4">
                    <div class="text-sm">
                        <span class="bg-green-500 px-3 py-1 rounded-full text-xs sm:text-sm">
                            ‚ú® 78% choisissent notre service conciergerie !
                        </span>
                    </div>
                    <div id="authButtons" class="flex gap-2">
                        <button onclick="showLogin()" class="bg-white bg-opacity-20 px-4 py-2 rounded text-sm hover:bg-opacity-30">
                            <i class="fas fa-sign-in-alt"></i> Connexion
                        </button>
                        <button onclick="showRegister()" class="bg-green-500 px-4 py-2 rounded text-sm hover:bg-green-600">
                            <i class="fas fa-user-plus"></i> S'inscrire
                        </button>
                    </div>
                    <div id="userMenu" class="hidden">
                        <span id="userName" class="text-sm mr-4"></span>
                        <button onclick="logout()" class="bg-red-500 px-3 py-1 rounded text-sm hover:bg-red-600">
                            <i class="fas fa-sign-out-alt"></i> D√©connexion
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section principale -->
    <div id="mainSection">
        <!-- Hero Section -->
        <section class="gradient-bg text-white py-20 fade-in">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl sm:text-5xl font-bold mb-6">
                    üöÄ Cr√©ez votre site web professionnel avec l'IA
                </h2>
                <p class="text-lg sm:text-xl mb-8 opacity-90">
                    Intelligence artificielle avanc√©e + Photos personnalis√©es + Templates premium = Site professionnel en 2-4h !
                </p>
                
                <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg rounded-lg p-6 sm:p-8 max-w-2xl mx-auto">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6">üéØ Cr√©er mon site professionnel</h3>
                    
                    <form id="websiteForm" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <input type="text" id="businessName" placeholder="Nom de votre entreprise" 
                                   class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                            
                            <select id="siteType" class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                                <option value="">Type de site</option>
                                <option value="restaurant">üçΩÔ∏è Restaurant</option>
                                <option value="salon">üíá Salon de beaut√©</option>
                                <option value="commerce">üè™ Commerce/Boutique</option>
                                <option value="service">üîß Service professionnel</option>
                                <option value="medical">üè• Cabinet m√©dical</option>
                                <option value="immobilier">üè† Immobilier</option>
                                <option value="hotel">üè® H√¥tel/H√©bergement</option>
                                <option value="fitness">üí™ Salle de sport</option>
                                <option value="location-voiture">üöó Location de voiture</option>
                                <option value="avocat">‚öñÔ∏è Cabinet d'avocat</option>
                                <option value="photographe">üì∏ Photographe</option>
                                <option value="plombier">üîß Plomberie</option>
                                <option value="electricien">‚ö° √âlectricien</option>
                                <option value="garage">üîß Garage automobile</option>
                                <option value="autre">‚ú® Autre activit√©</option>
                            </select>
                        </div>
                        
                        <textarea id="description" placeholder="D√©crivez votre activit√© et vos services en d√©tail..." 
                                  class="w-full p-3 rounded-lg text-gray-800 font-medium h-24" required></textarea>
                        
                        <input type="email" id="userEmail" placeholder="Votre email pour recevoir le site" 
                               class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                        
                        <!-- Upload de photos -->
                        <div class="photo-upload-area" id="photoUploadArea">
                            <div class="mb-4">
                                <i class="fas fa-camera text-4xl text-gray-400 mb-2"></i>
                                <h4 class="text-gray-800 font-bold text-lg mb-2">üì∏ Ajoutez vos photos (optionnel)</h4>
                                <p class="text-gray-600 text-sm mb-4">
                                    Glissez vos images ici ou cliquez pour s√©lectionner<br>
                                    <span class="text-xs">JPG, PNG, WebP - Max 5 Mo par image</span>
                                </p>
                                <input type="file" id="photoInput" multiple accept="image/*" class="hidden">
                                <button type="button" onclick="document.getElementById('photoInput').click()" 
                                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-sm">
                                    <i class="fas fa-upload mr-2"></i>Choisir des photos
                                </button>
                            </div>
                            <div id="photoPreview" class="grid grid-cols-3 gap-2 mt-4 hidden"></div>
                        </div>
                        
                        <!-- Niveau de qualit√© -->
                        <div class="border rounded-lg p-4 bg-white bg-opacity-20">
                            <h4 class="text-white font-bold mb-3">üé® Niveau de qualit√© souhait√©</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <label class="flex items-center p-3 bg-white bg-opacity-10 rounded cursor-pointer hover:bg-opacity-20">
                                    <input type="radio" name="quality" value="standard" class="mr-3" checked>
                                    <div>
                                        <div class="font-bold text-sm">Standard</div>
                                        <div class="text-xs opacity-75">Site simple et efficace</div>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 bg-white bg-opacity-10 rounded cursor-pointer hover:bg-opacity-20">
                                    <input type="radio" name="quality" value="premium" class="mr-3">
                                    <div>
                                        <div class="font-bold text-sm">Premium ‚≠ê</div>
                                        <div class="text-xs opacity-75">Design avanc√© + animations</div>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 bg-white bg-opacity-10 rounded cursor-pointer hover:bg-opacity-20">
                                    <input type="radio" name="quality" value="professionnel" class="mr-3">
                                    <div>
                                        <div class="font-bold text-sm">Professionnel üèÜ</div>
                                        <div class="text-xs opacity-75">Qualit√© agence web</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-4 px-6 rounded-lg transform hover:scale-105 transition-all duration-200 text-lg">
                            ü§ñ G√âN√âRER MON SITE AVEC L'IA
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Templates de qualit√© -->
        <section id="qualityTemplates" class="quality-templates py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">üé® Choisissez votre template professionnel</h3>
                    <p class="text-xl text-gray-600">L'IA a g√©n√©r√© ces designs personnalis√©s pour votre activit√©</p>
                </div>
                
                <div id="templateGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <!-- Les templates seront g√©n√©r√©s dynamiquement -->
                </div>
                
                <div class="text-center mt-8">
                    <button onclick="proceedWithSelectedTemplate()" id="continueBtn" 
                            class="bg-green-500 text-white px-8 py-3 rounded-lg font-bold hover:bg-green-600 disabled:opacity-50" disabled>
                        Continuer avec ce design
                    </button>
                </div>
            </div>
        </section>

        <!-- Service Conciergerie -->
        <section class="py-16 bg-gray-50 fade-in">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-4">
                        ü§ñ IA Professionnelle + Service Conciergerie
                    </h3>
                    <p class="text-lg sm:text-xl text-gray-600">
                        Notre IA cr√©e des sites de qualit√© agence web !
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                    <!-- Offre Site Seul -->
                    <div class="bg-white rounded-lg shadow-lg p-6 sm:p-8 card-hover">
                        <div class="text-center">
                            <h4 class="text-xl sm:text-2xl font-bold text-gray-800 mb-4">üìÑ Site IA Professionnel</h4>
                            <div class="text-3xl sm:text-4xl font-bold text-blue-600 mb-4">15‚Ç¨</div>
                            <ul class="text-left space-y-2 mb-6 text-sm sm:text-base">
                                <li>‚úÖ Site cr√©√© par IA professionnelle</li>
                                <li>‚úÖ Int√©gration de vos photos personnelles</li>
                                <li>‚úÖ Templates premium adaptatifs</li>
                                <li>‚úÖ Pr√©visualisation et modifications</li>
                                <li>‚úÖ Code source optimis√©</li>
                                <li>‚úÖ Livraison par email instantan√©e</li>
                                <li>‚ùå Pas d'h√©bergement inclus</li>
                                <li>‚ùå Installation par vos soins</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Offre Conciergerie -->
                    <div class="bg-gradient-to-br from-green-500 to-blue-600 text-white rounded-lg shadow-lg p-6 sm:p-8 card-hover relative">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-orange-500 px-3 py-1 rounded-full text-xs sm:text-sm font-bold">
                            üî• LE PLUS POPULAIRE
                        </div>
                        <div class="text-center mt-4">
                            <h4 class="text-xl sm:text-2xl font-bold mb-4">ü§ñ Conciergerie IA Compl√®te</h4>
                            <div class="text-3xl sm:text-4xl font-bold mb-4">49‚Ç¨</div>
                            <ul class="text-left space-y-2 mb-6 text-sm sm:text-base">
                                <li>‚úÖ Tout inclus de l'offre Site IA</li>
                                <li>‚úÖ <strong>Nom de domaine automatique</strong></li>
                                <li>‚úÖ <strong>H√©bergement premium configur√©</strong></li>
                                <li>‚úÖ <strong>Site en ligne en 2-4h maximum</strong></li>
                                <li>‚úÖ <strong>Optimisation SEO automatique</strong></li>
                                <li>‚úÖ <strong>Certificat SSL et s√©curit√©</strong></li>
                                <li>‚úÖ <strong>Support technique 3 mois</strong></li>
                                <li>‚úÖ <strong>Maintenance et sauvegardes</strong></li>
                                <li>‚úÖ <strong>Formation utilisateur incluse</strong></li>
                            </ul>
                            <div class="bg-yellow-400 text-gray-800 p-3 rounded-lg text-xs sm:text-sm font-bold mb-4">
                                ‚è∞ Site professionnel en ligne en 2-4h !<br>
                                ü§ñ IA de qualit√© agence web
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Processus automatis√© -->
        <section class="py-16 fade-in">
            <div class="container mx-auto px-4">
                <h3 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-12">
                    ü§ñ Notre IA Professionnelle en Action
                </h3>
                
                <div class="max-w-6xl mx-auto">
                    <div class="grid sm:grid-cols-2 lg:grid-cols-6 gap-6">
                        <div class="text-center p-4">
                            <div class="bg-blue-500 text-white rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-lg sm:text-2xl font-bold mx-auto mb-4">1</div>
                            <h4 class="font-bold text-base sm:text-lg mb-2">üìù Analyse</h4>
                            <p class="text-gray-600 text-sm sm:text-base">IA analyse votre activit√©</p>
                        </div>
                        
                        <div class="text-center p-4">
                            <div class="bg-green-500 text-white rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-lg sm:text-2xl font-bold mx-auto mb-4">2</div>
                            <h4 class="font-bold text-base sm:text-lg mb-2">üé® Templates</h4>
                            <p class="text-gray-600 text-sm sm:text-base">G√©n√©ration de designs premium</p>
                        </div>
                        
                        <div class="text-center p-4">
                            <div class="bg-purple-500 text-white rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-lg sm:text-2xl font-bold mx-auto mb-4">3</div>
                            <h4 class="font-bold text-base sm:text-lg mb-2">üì∏ Photos</h4>
                            <p class="text-gray-600 text-sm sm:text-base">Int√©gration photos personnelles</p>
                        </div>
                        
                        <div class="text-center p-4">
                            <div class="bg-orange-500 text-white rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-lg sm:text-2xl font-bold mx-auto mb-4">4</div>
                            <h4 class="font-bold text-base sm:text-lg mb-2">‚úèÔ∏è Personnalisation</h4>
                            <p class="text-gray-600 text-sm sm:text-base">Modifications √† volont√©</p>
                        </div>
                        
                        <div class="text-center p-4">
                            <div class="bg-red-500 text-white rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-lg sm:text-2xl font-bold mx-auto mb-4">5</div>
                            <h4 class="font-bold text-base sm:text-lg mb-2">üí≥ Paiement</h4>
                            <p class="text-gray-600 text-sm sm:text-base">Paiement s√©curis√©</p>
                        </div>
                        
                        <div class="text-center p-4">
                            <div class="bg-indigo-500 text-white rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-lg sm:text-2xl font-bold mx-auto mb-4">6</div>
                            <h4 class="font-bold text-base sm:text-lg mb-2">üåê En ligne</h4>
                            <p class="text-gray-600 text-sm sm:text-base">Site professionnel livr√©</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact -->
        <section class="gradient-bg text-white py-16 fade-in">
            <div class="container mx-auto px-4 text-center">
                <h3 class="text-2xl sm:text-3xl font-bold mb-8">üí¨ Besoin d'aide ou d'informations ?</h3>
                <p class="text-lg sm:text-xl mb-8">Notre √©quipe d'experts IA est disponible pour vous accompagner !</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="mailto:contact@iawebgen.com" 
                       class="bg-white text-blue-600 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors">
                        üìß contact@iawebgen.com
                    </a>
                    <a href="https://www.paypal.com/paypalme/assakourc" target="_blank" 
                       class="bg-green-500 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-600 transition-colors">
                        üí≥ PayPal: assakourc
                    </a>
                </div>
                
                <div class="mt-8 text-sm opacity-75">
                    <p>ü§ñ Propuls√© par IA WebGen - Intelligence artificielle professionnelle</p>
                    <p>‚ö° Service premium disponible 24h/24 - Sites de qualit√© agence</p>
                    <p>üìß Livraison instantan√©e avec formation utilisateur incluse</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Section Pr√©visualisation -->
    <div id="previewSection" class="preview-section min-h-screen bg-gray-100 py-8">
        <div class="container mx-auto px-4">
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">
                        üéâ Votre site professionnel : <span id="previewBusinessName"></span>
                    </h2>
                    <button onclick="goBackToMain()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                        <i class="fas fa-arrow-left"></i> Retour
                    </button>
                </div>
                
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Aper√ßu du site -->
                    <div>
                        <h3 class="text-lg font-bold mb-4">üì± Aper√ßu de votre site professionnel</h3>
                        <div id="websitePreview" class="border-2 border-gray-300 rounded-lg p-4 bg-white min-h-96 overflow-auto" style="max-height: 600px;">
                            <!-- Le contenu sera g√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                    
                    <!-- Options de personnalisation -->
                    <div>
                        <h3 class="text-lg font-bold mb-4">‚úèÔ∏è Personnalisez votre site</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold mb-2">Couleur principale</label>
                                <input type="color" id="primaryColor" value="#3b82f6" class="w-full h-10 rounded">
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Titre principal</label>
                                <input type="text" id="mainTitle" class="w-full p-3 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Sous-titre</label>
                                <textarea id="subtitle" class="w-full p-3 border rounded-lg h-20"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">T√©l√©phone</label>
                                <input type="tel" id="phone" class="w-full p-3 border rounded-lg" placeholder="01 23 45 67 89">
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Adresse</label>
                                <input type="text" id="address" class="w-full p-3 border rounded-lg" placeholder="123 Rue Example, Paris">
                            </div>
                            <button onclick="updatePreview()" class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">
                                üîÑ Mettre √† jour l'aper√ßu
                            </button>
                        </div>
                        
                        <!-- Choix de l'offre -->
                        <div class="mt-8 border-t pt-6">
                            <h3 class="text-lg font-bold mb-4">üí≥ Choisissez votre offre</h3>
                            <div class="space-y-4">
                                <div class="border rounded-lg p-4 cursor-pointer hover:bg-blue-50" onclick="selectOffer('site', 15)">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-bold">üìÑ Site IA Pro - 15‚Ç¨</h4>
                                            <p class="text-sm text-gray-600">Code source + Photos + Livraison email</p>
                                        </div>
                                        <input type="radio" name="offer" value="site" class="offer-radio">
                                    </div>
                                </div>
                                <div class="border rounded-lg p-4 cursor-pointer hover:bg-green-50 border-green-500" onclick="selectOffer('conciergerie', 49)">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-bold">ü§ñ Conciergerie IA - 49‚Ç¨ ‚≠ê</h4>
                                            <p class="text-sm text-gray-600">Site + Domaine + H√©bergement + Formation</p>
                                        </div>
                                        <input type="radio" name="offer" value="conciergerie" class="offer-radio" checked>
                                    </div>
                                </div>
                            </div>
                            
                            <button id="payButton" onclick="processPayment()" class="w-full mt-6 bg-green-500 text-white py-3 px-6 rounded-lg font-bold hover:bg-green-600 transform hover:scale-105 transition-all">
                                üí≥ COMMANDER MAINTENANT - 49‚Ç¨
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal d'authentification -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 id="authModalTitle" class="text-2xl font-bold">Connexion</h2>
                <button onclick="closeAuthModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <!-- Connexion -->
            <div id="loginForm" class="auth-section">
                <form onsubmit="login(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold mb-2">Email</label>
                        <input type="email" id="loginEmail" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Mot de passe</label>
                        <input type="password" id="loginPassword" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600">
                        Se connecter
                    </button>
                </form>
                <p class="mt-4 text-center">
                    <a href="#" onclick="showRegisterForm()" class="text-blue-500 hover:underline">Pas de compte ? S'inscrire</a>
                </p>
            </div>
            
            <!-- Inscription -->
            <div id="registerForm" class="auth-section">
                <form onsubmit="register(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold mb-2">Nom complet</label>
                        <input type="text" id="registerName" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Email</label>
                        <input type="email" id="registerEmail" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Mot de passe</label>
                        <input type="password" id="registerPassword" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <button type="submit" class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600">
                        S'inscrire
                    </button>
                </form>
                <p class="mt-4 text-center">
                    <a href="#" onclick="showLoginForm()" class="text-blue-500 hover:underline">D√©j√† un compte ? Se connecter</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let currentOffer = 'conciergerie';
        let currentPrice = 49;
        let websiteData = {};
        let selectedTemplate = null;
        let uploadedPhotos = [];

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            if (currentUser) {
                showUserMenu();
            }
            
            const form = document.getElementById('websiteForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    generateTemplates();
                });
            }

            setupPhotoUpload();
        });

        // Configuration de l'upload de photos
        function setupPhotoUpload() {
            const uploadArea = document.getElementById('photoUploadArea');
            const photoInput = document.getElementById('photoInput');
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                handleFiles(e.dataTransfer.files);
            });
            
            photoInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
        }

        function handleFiles(files) {
            for (let file of files) {
                if (file.type.startsWith('image/') && file.size <= 5 * 1024 * 1024) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        uploadedPhotos.push({
                            name: file.name,
                            data: e.target.result
                        });
                        displayPhotoPreview();
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function displayPhotoPreview() {
            const preview = document.getElementById('photoPreview');
            preview.innerHTML = '';
            preview.classList.remove('hidden');
            
            uploadedPhotos.forEach((photo, index) => {
                const div = document.createElement('div');
                div.className = 'relative';
                div.innerHTML = `
                    <img src="${photo.data}" alt="${photo.name}" class="w-full h-24 object-cover rounded">
                    <button onclick="removePhoto(${index})" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 text-xs">√ó</button>
                `;
                preview.appendChild(div);
            });
        }

        function removePhoto(index) {
            uploadedPhotos.splice(index, 1);
            displayPhotoPreview();
            if (uploadedPhotos.length === 0) {
                document.getElementById('photoPreview').classList.add('hidden');
            }
        }

        // G√©n√©ration de templates par l'IA
        function generateTemplates() {
            const businessName = document.getElementById('businessName').value.trim();
            const description = document.getElementById('description').value.trim();
            const siteType = document.getElementById('siteType').value;
            const userEmail = document.getElementById('userEmail').value.trim();
            const quality = document.querySelector('input[name="quality"]:checked').value;

            if (!businessName || !description || !siteType || !userEmail) {
                showNotification('‚ùå Veuillez remplir tous les champs obligatoires !');
                return;
            }

            websiteData = {
                businessName,
                description,
                siteType,
                userEmail,
                quality,
                photos: uploadedPhotos,
                mainTitle: businessName,
                subtitle: description,
                primaryColor: '#3b82f6',
                phone: '',
                address: ''
            };

            // Afficher la section des templates
            document.getElementById('mainSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'block';
            
            showNotification('ü§ñ L\'IA g√©n√®re vos templates personnalis√©s...');
            
            setTimeout(() => {
                generateTemplateOptions();
            }, 2000);
        }

        function generateTemplateOptions() {
            const templateGrid = document.getElementById('templateGrid');
            templateGrid.innerHTML = '';
            
            const templates = getTemplatesForType(websiteData.siteType, websiteData.quality);
            
            templates.forEach((template, index) => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card bg-white rounded-lg shadow-lg p-4 border-2 border-gray-200';
                templateCard.onclick = () => selectTemplate(index);
                
                templateCard.innerHTML = `
                    <div class="mb-4">
                        <div class="bg-gradient-to-br ${template.gradient} h-32 rounded-lg flex items-center justify-center text-white font-bold text-lg">
                            ${template.preview}
                        </div>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2">${template.name}</h4>
                        <p class="text-gray-600 text-sm mb-3">${template.description}</p>
                        <div class="flex flex-wrap gap-1 mb-3">
                            ${template.features.map(f => `<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">${f}</span>`).join('')}
                        </div>
                        <div class="text-center">
                            <span class="text-sm font-bold text-green-600">${template.level}</span>
                        </div>
                    </div>
                `;
                
                templateGrid.appendChild(templateCard);
            });
            
            showNotification('‚úÖ Templates g√©n√©r√©s ! Choisissez votre pr√©f√©r√©.');
        }

        function getTemplatesForType(siteType, quality) {
            const baseTemplates = {
                'location-voiture': [
                    {
                        name: 'Auto Premium',
                        description: 'Design √©l√©gant pour location de v√©hicules haut de gamme',
                        preview: 'üöó PREMIUM<br>BMW ‚Ä¢ AUDI<br>MERCEDES',
                        gradient: 'from-gray-800 to-gray-600',
                        features: ['Catalogue v√©hicules', 'R√©servations', 'Prix en temps r√©el'],
                        level: 'Premium'
                    },
                    {
                        name: 'Drive Easy',
                        description: 'Interface simple et efficace pour location rapide',
                        preview: 'üöô LOCATION<br>RAPIDE<br>24H/7J',
                        gradient: 'from-blue-500 to-blue-700',
                        features: ['Booking rapide', 'Calcul prix', 'Contact direct'],
                        level: 'Standard'
                    },
                    {
                        name: 'Fleet Pro',
                        description: 'Solution professionnelle pour flottes d\'entreprise',
                        preview: 'üöê FLOTTE<br>ENTREPRISE<br>PRO',
                        gradient: 'from-green-600 to-teal-700',
                        features: ['Gestion flotte', 'Contrats B2B', 'Statistiques'],
                        level: 'Professionnel'
                    }
                ],
                restaurant: [
                    {
                        name: 'Gourmet √âl√©gant',
                        description: 'Design sophistiqu√© pour restaurant haut de gamme',
                        preview: 'üçΩÔ∏è MENU<br>GASTRONOMIE<br>‚≠ê‚≠ê‚≠ê',
                        gradient: 'from-amber-500 to-orange-600',
                        features: ['Menu interactif', 'R√©servations', 'Galerie photos'],
                        level: 'Premium'
                    },
                    {
                        name: 'Bistrot Moderne',
                        description: 'Style d√©contract√© et chaleureux',
                        preview: '‚òï BISTROT<br>CONVIVIAL<br>LOCAL',
                        gradient: 'from-green-500 to-teal-600',
                        features: ['Carte simple', 'Horaires', 'Contact'],
                        level: 'Standard'
                    }
                ],
                salon: [
                    {
                        name: 'Beauty Spa',
                        description: 'Ambiance relaxante et zen',
                        preview: 'üíÜ‚Äç‚ôÄÔ∏è SPA<br>BEAUT√â<br>RELAX',
                        gradient: 'from-pink-500 to-rose-600',
                        features: ['Services beaut√©', 'R√©servations', 'Galerie'],
                        level: 'Premium'
                    }
                ],
                garage: [
                    {
                        name: 'Auto Service Pro',
                        description: 'Interface professionnelle pour garage automobile',
                        preview: 'üîß GARAGE<br>R√âPARATION<br>AUTO',
                        gradient: 'from-red-600 to-red-800',
                        features: ['Services auto', 'Devis', 'Rendez-vous'],
                        level: 'Standard'
                    }
                ],
                plombier: [
                    {
                        name: 'Plomberie Express',
                        description: 'Site d\'urgence pour plombier',
                        preview: 'üîß PLOMBIER<br>URGENCE<br>24H/24',
                        gradient: 'from-blue-600 to-cyan-700',
                        features: ['Urgences', 'Devis', 'Interventions'],
                        level: 'Standard'
                    }
                ],
                photographe: [
                    {
                        name: 'Portfolio Artist',
                        description: 'Galerie √©l√©gante pour photographe',
                        preview: 'üì∏ PORTFOLIO<br>PHOTOS<br>ART',
                        gradient: 'from-purple-600 to-indigo-700',
                        features: ['Galerie photos', 'Portfolio', 'Contact'],
                        level: 'Premium'
                    }
                ]
            };

            const templates = baseTemplates[siteType] || [
                {
                    name: 'Professionnel Classic',
                    description: 'Design polyvalent et efficace',
                    preview: '‚≠ê PRO<br>SERVICE<br>QUALIT√â',
                    gradient: 'from-gray-500 to-gray-700',
                    features: ['Pr√©sentation', 'Services', 'Contact'],
                    level: quality === 'professionnel' ? 'Professionnel' : 'Standard'
                }
            ];

            return templates.filter(t => {
                if (quality === 'standard') return t.level !== 'Professionnel';
                if (quality === 'premium') return t.level !== 'Standard';
                return true;
            });
        }

        function selectTemplate(index) {
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelectorAll('.template-card')[index];
            selectedCard.classList.add('selected');
            
            selectedTemplate = index;
            
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.disabled = false;
            continueBtn.classList.remove('disabled:opacity-50');
        }

        function proceedWithSelectedTemplate() {
            if (selectedTemplate === null) return;
            generatePreview();
        }

        // Fonctions d'authentification
        function showLogin() {
            document.getElementById('authModalTitle').textContent = 'Connexion';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('authModal').style.display = 'block';
        }

        function showRegister() {
            document.getElementById('authModalTitle').textContent = 'Inscription';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('authModal').style.display = 'block';
        }

        function showLoginForm() { showLogin(); }
        function showRegisterForm() { showRegister(); }
        function closeAuthModal() { document.getElementById('authModal').style.display = 'none'; }

        function login(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const user = { email, name: email.split('@')[0] };
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            showUserMenu();
            closeAuthModal();
            showNotification('Connexion r√©ussie !');
        }

        function register(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const user = { email, name };
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            showUserMenu();
            closeAuthModal();
            showNotification('Inscription r√©ussie !');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userMenu').style.display = 'none';
            showNotification('D√©connexion r√©ussie !');
        }

        function showUserMenu() {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenu').style.display = 'block';
            document.getElementById('userName').textContent = `üëã ${currentUser.name}`;
        }

        // G√©n√©ration de la pr√©visualisation (CORRIG√âE)
        function generatePreview() {
            document.getElementById('previewBusinessName').textContent = websiteData.businessName;
            document.getElementById('mainTitle').value = websiteData.businessName;
            document.getElementById('subtitle').value = websiteData.description;
            
            // G√©n√©rer imm√©diatement l'aper√ßu
            updatePreview();
            
            // Afficher la section de pr√©visualisation
            document.getElementById('qualityTemplates').style.display = 'none';
            document.getElementById('previewSection').style.display = 'block';
            
            window.scrollTo(0, 0);
            showNotification('‚úÖ Pr√©visualisation g√©n√©r√©e ! Personnalisez votre site.');
        }

        function updatePreview() {
            const mainTitle = document.getElementById('mainTitle').value || websiteData.businessName;
            const subtitle = document.getElementById('subtitle').value || websiteData.description;
            const primaryColor = document.getElementById('primaryColor').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;

            websiteData.mainTitle = mainTitle;
            websiteData.subtitle = subtitle;
            websiteData.primaryColor = primaryColor;
            websiteData.phone = phone;
            websiteData.address = address;

            const siteContent = generateSiteContentByType();
            document.getElementById('websitePreview').innerHTML = siteContent;
        }

        function generateSiteContentByType() {
            const { mainTitle, subtitle, primaryColor, phone, address, siteType, photos } = websiteData;
            
            let baseContent = `
                <div style="background: linear-gradient(135deg, ${primaryColor}, #6366f1); color: white; padding: 20px; text-align: center; border-radius: 10px; margin-bottom: 20px;">
                    <h1 style="font-size: 2rem; font-weight: bold; margin-bottom: 10px;">${mainTitle}</h1>
                    <p style="font-size: 1.1rem; opacity: 0.9;">${subtitle}</p>
                </div>
            `;

            // Ajouter galerie photos si disponibles
            if (photos && photos.length > 0) {
                baseContent += `
                    <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h2 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 15px;">üì∏ Nos R√©alisations</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                            ${photos.slice(0, 6).map(photo => `
                                <img src="${photo.data}" alt="${photo.name}" style="width: 100%; height: 100px; object-fit: cover; border-radius: 8px;">
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Contenu sp√©cifique selon le type
            let specificContent = '';
            
            switch(siteType) {
                case 'location-voiture':
                    specificContent = `
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h2 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 15px;">üöó Notre Flotte de V√©hicules</h2>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">üöó</div>
                                    <h3 style="font-weight: bold; color: ${primaryColor};">Citadines</h3>
                                    <p style="color: #64748b; font-size: 0.9rem;">√Ä partir de 25‚Ç¨/jour</p>
                                    <p style="font-size: 0.8rem;">Peugeot 208, Renault Clio</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">üöô</div>
                                    <h3 style="font-weight: bold; color: ${primaryColor};">SUV</h3>
                                    <p style="color: #64748b; font-size: 0.9rem;">√Ä partir de 45‚Ç¨/jour</p>
                                    <p style="font-size: 0.8rem;">BMW X3, Audi Q5</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">üèéÔ∏è</div>
                                    <h3 style="font-weight: bold; color: ${primaryColor};">Premium</h3>
                                    <p style="color: #64748b; font-size: 0.9rem;">√Ä partir de 89‚Ç¨/jour</p>
                                    <p style="font-size: 0.8rem;">Mercedes, BMW S√©rie 5</p>
                                </div>
                            </div>
                        </div>
                        <div style="background: ${primaryColor}; color: white; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3 style="font-size: 1.3rem; margin-bottom: 10px;">üéØ R√©servation Rapide</h3>
                            <p style="margin-bottom: 15px;">R√©servez en ligne en 2 minutes</p>
                            <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; display: inline-block;">
                                <span style="font-weight: bold;">üìû Disponible 24h/24 - 7j/7</span>
                            </div>
                        </div>
                    `;
                    break;

                case 'restaurant':
                    specificContent = `
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h2 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 15px;">üçΩÔ∏è Notre Menu</h2>
                            <div style="display: grid; gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${primaryColor};">
                                    <h3 style="font-weight: bold; color: ${primaryColor};">ü•ó Entr√©es</h3>
                                    <div style="margin-top: 8px;">
                                        <div style="display: flex; justify-content: space-between; padding: 5px 0;">
                                            <span>Salade Caesar</span><span style="font-weight: bold;">12‚Ç¨</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; padding: 5px 0;">
                                            <span>Carpaccio de saumon</span><span style="font-weight: bold;">15‚Ç¨</span>
                                        </div>
                                    </div>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${primaryColor};">
                                    <h3 style="font-weight: bold; color: ${primaryColor};">ü•© Plats Principaux</h3>
                                    <div style="margin-top: 8px;">
                                        <div style="display: flex; justify-content: space-between; padding: 5px 0;">
                                            <span>Filet de b≈ìuf aux morilles</span><span style="font-weight: bold;">28‚Ç¨</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; padding: 5px 0;">
                                            <span>Saumon grill√©</span><span style="font-weight: bold;">22‚Ç¨</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'garage':
                    specificContent = `
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h2 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 15px;">üîß Nos Services Auto</h2>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                ${['üîß M√©canique g√©n√©rale - 60‚Ç¨/h', 'üõû Pneumatiques - √Ä partir de 80‚Ç¨', 'üîã √âlectricit√© auto - 70‚Ç¨/h', 'üöó Carrosserie - Devis gratuit'].map(service => `
                                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #e2e8f0;">
                                        <div style="font-weight: bold; color: ${primaryColor};">${service}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;

                case 'photographe':
                    specificContent = `
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h2 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 15px;">üì∏ Mes Sp√©cialit√©s Photo</h2>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                ${['üë∞ Mariages - 800‚Ç¨', 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Portraits famille - 150‚Ç¨', 'üéÇ √âv√©nements - 300‚Ç¨', 'üè¢ Corporate - 200‚Ç¨/h'].map(service => `
                                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-weight: bold; color: ${primaryColor}; font-size: 0.9rem;">${service}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;

                default:
                    specificContent = `
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h2 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 15px;">‚ú® Nos Services</h2>
                            <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${primaryColor};">
                                <h3 style="font-weight: bold; color: ${primaryColor};">Service Premium</h3>
                                <p style="color: #64748b; margin-top: 8px;">D√©couvrez nos services de qualit√© professionnelle adapt√©s √† vos besoins sp√©cifiques.</p>
                            </div>
                        </div>
                    `;
            }

            // Section contact si informations disponibles
            let contactSection = '';
            if (phone || address) {
                contactSection = `
                    <div style="background: ${primaryColor}; color: white; padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h3 style="font-size: 1.3rem; margin-bottom: 15px;">üìû Contactez-nous</h3>
                        <div style="display: grid; gap: 10px;">
                            ${phone ? `<div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 6px;">üì± ${phone}</div>` : ''}
                            ${address ? `<div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 6px;">üìç ${address}</div>` : ''}
                        </div>
                    </div>
                `;
            }

            return baseContent + specificContent + contactSection;
        }

        function goBackToMain() {
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'none';
            document.getElementById('mainSection').style.display = 'block';
        }

        function selectOffer(type, price) {
            currentOffer = type;
            currentPrice = price;
            
            document.querySelectorAll('.offer-radio').forEach(radio => {
                radio.checked = radio.value === type;
            });
            
            const payButton = document.getElementById('payButton');
            if (type === 'site') {
                payButton.innerHTML = 'üí≥ COMMANDER MAINTENANT - 15‚Ç¨';
                payButton.style.backgroundColor = '#3b82f6';
            } else {
                payButton.innerHTML = 'üí≥ COMMANDER MAINTENANT - 49‚Ç¨';
                payButton.style.backgroundColor = '#10b981';
            }
        }

        function processPayment() {
            if (!currentUser) {
                showNotification('‚ùå Vous devez √™tre connect√© pour effectuer un achat !');
                showLogin();
                return;
            }

            let paypalUrl;
            if (currentOffer === 'site') {
                paypalUrl = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=assakourc@gmail.com&item_name=Site+IA+Professionnel+-+IA+WebGen&amount=15.00&currency_code=EUR&return=${encodeURIComponent(window.location.href)}&cancel_return=${encodeURIComponent(window.location.href)}`;
            } else {
                paypalUrl = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=assakourc@gmail.com&item_name=Service+Conciergerie+IA+Complete+-+IA+WebGen&amount=49.00&currency_code=EUR&return=${encodeURIComponent(window.location.href)}&cancel_return=${encodeURIComponent(window.location.href)}`;
            }

            const orderData = {
                user: currentUser,
                websiteData: websiteData,
                selectedTemplate: selectedTemplate,
                offer: currentOffer,
                price: currentPrice,
                date: new Date().toISOString()
            };
            localStorage.setItem('pendingOrder', JSON.stringify(orderData));

            const message = `üéâ Excellent choix ! Redirection vers PayPal pour ${currentPrice}‚Ç¨\n\n` +
                          `üìß Apr√®s paiement, vous recevrez :\n` +
                          `‚Ä¢ ${currentOffer === 'site' ? 'Site professionnel avec vos photos' : 'Site mis en ligne + domaine + h√©bergement'}\n` +
                          `‚Ä¢ Email de confirmation d√©taill√©\n` +
                          `‚Ä¢ ${currentOffer === 'conciergerie' ? 'Formation utilisateur incluse' : 'Instructions compl√®tes'}\n\n` +
                          `Continuer vers PayPal ?`;

            if (confirm(message)) {
                simulateEmailConfirmation();
                window.open(paypalUrl, '_blank');
                showNotification('üéâ Redirection PayPal... Email de confirmation envoy√© !');
            }
        }

        function simulateEmailConfirmation() {
            const orderData = JSON.parse(localStorage.getItem('pendingOrder'));
            if (!orderData) return;

            console.log('üìß EMAIL DE CONFIRMATION ENVOY√â √Ä:', orderData.websiteData.userEmail);
            setTimeout(() => {
                showNotification('üìß Email de confirmation envoy√© avec succ√®s !');
            }, 2000);
        }

        // Fonctions de partage
        function toggleShareMenu() {
            const menu = document.getElementById('shareMenu');
            menu.classList.toggle('hidden');
        }

        function shareOnFacebook() {
            const url = window.location.href;
            const fbUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            window.open(fbUrl, '_blank', 'width=600,height=400');
            showNotification('üéÅ Code SHARE10 activ√© ! 10% de r√©duction !');
            document.getElementById('shareMenu').classList.add('hidden');
        }

        function shareOnTwitter() {
            const url = window.location.href;
            const text = "ü§ñ Incroyable ! IA WebGen cr√©e des sites professionnels en 2-4h !";
            const twitterUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
            window.open(twitterUrl, '_blank', 'width=600,height=400');
            showNotification('üéÅ Code SHARE10 activ√© ! 10% de r√©duction !');
            document.getElementById('shareMenu').classList.add('hidden');
        }

        function shareOnWhatsApp() {
            const url = window.location.href;
            const text = "ü§ñ Regarde ! IA WebGen cr√©e des sites pro en 2h : ";
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text + url)}`;
            window.open(whatsappUrl, '_blank');
            showNotification('üéÅ Code SHARE10 activ√© ! √âconomisez 10% !');
            document.getElementById('shareMenu').classList.add('hidden');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showNotification('üîó Lien copi√© ! Code promo SHARE10 = -10% ! üéÅ');
                document.getElementById('shareMenu').classList.add('hidden');
            });
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.share-widget')) {
                document.getElementById('shareMenu').classList.add('hidden');
            }
        });

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            text.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
