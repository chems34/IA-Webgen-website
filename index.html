<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA WebGen - Cr√©ateur de Sites Web Automatis√©</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-5px); transition: transform 0.3s ease; }
        .fade-in { animation: fadeIn 0.8s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .preview-section { display: none; }
        .auth-section { display: none; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto; }
        .notification { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1001; display: none; }
        .share-widget { position: fixed; bottom: 20px; right: 20px; z-index: 100; }
        .quality-templates { display: none; }
        .photo-upload-area { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 20px; text-align: center; transition: all 0.3s; }
        .photo-upload-area:hover { border-color: #3b82f6; background-color: #f0f9ff; }
        .photo-upload-area.drag-over { border-color: #10b981; background-color: #f0fdf4; }
        .template-card { cursor: pointer; transition: all 0.3s; border: 3px solid transparent; }
        .template-card:hover { transform: scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .template-card.selected { border: 3px solid #10b981; }
        .premium-badge { position: absolute; top: -8px; right: -8px; background: linear-gradient(45deg, #ffd700, #ffed4e); color: #1f2937; padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; }
    </style>
</head>
<body class="font-sans">
    
    <!-- Notification -->
    <div id="notification" class="notification bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
        <span id="notificationText">Message</span>
    </div>

    <!-- Widget de partage -->
    <div class="share-widget">
        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full shadow-lg p-3 relative">
            <button onclick="toggleShareMenu()" class="flex items-center space-x-2 text-sm font-medium">
                <i class="fas fa-share-alt"></i>
                <span>Partager = -10%</span>
            </button>
            <div id="shareMenu" class="hidden absolute bottom-full right-0 mb-2 bg-white rounded-lg shadow-xl p-3 min-w-48">
                <p class="text-gray-800 text-xs font-bold mb-2">üéÅ Partagez et √©conomisez 10% !</p>
                <div class="flex gap-2">
                    <button onclick="shareOnFacebook()" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700 text-xs">
                        <i class="fab fa-facebook-f"></i>
                    </button>
                    <button onclick="shareOnTwitter()" class="bg-blue-400 text-white p-2 rounded hover:bg-blue-500 text-xs">
                        <i class="fab fa-twitter"></i>
                    </button>
                    <button onclick="shareOnWhatsApp()" class="bg-green-500 text-white p-2 rounded hover:bg-green-600 text-xs">
                        <i class="fab fa-whatsapp"></i>
                    </button>
                    <button onclick="copyLink()" class="bg-gray-600 text-white p-2 rounded hover:bg-gray-700 text-xs">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
                <p class="text-gray-600 text-xs mt-2">Code: SHARE10</p>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="gradient-bg text-white py-4 fade-in">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center flex-wrap">
                <h1 class="text-2xl font-bold">ü§ñ IA WebGen</h1>
                <div class="flex items-center gap-4">
                    <div class="text-sm">
                        <span class="bg-green-500 px-3 py-1 rounded-full text-xs sm:text-sm">
                            ‚ú® 78% choisissent notre service conciergerie !
                        </span>
                    </div>
                    <div id="authButtons" class="flex gap-2">
                        <button onclick="showLogin()" class="bg-white bg-opacity-20 px-4 py-2 rounded text-sm hover:bg-opacity-30">
                            <i class="fas fa-sign-in-alt"></i> Connexion
                        </button>
                        <button onclick="showRegister()" class="bg-green-500 px-4 py-2 rounded text-sm hover:bg-green-600">
                            <i class="fas fa-user-plus"></i> S'inscrire
                        </button>
                    </div>
                    <div id="userMenu" class="hidden">
                        <span id="userName" class="text-sm mr-4"></span>
                        <button onclick="logout()" class="bg-red-500 px-3 py-1 rounded text-sm hover:bg-red-600">
                            <i class="fas fa-sign-out-alt"></i> D√©connexion
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section principale -->
    <div id="mainSection">
        <!-- Hero Section -->
        <section class="gradient-bg text-white py-20 fade-in">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl sm:text-5xl font-bold mb-6">
                    üöÄ Cr√©ez votre site web professionnel avec l'IA
                </h2>
                <p class="text-lg sm:text-xl mb-8 opacity-90">
                    Intelligence artificielle avanc√©e + 7 th√®mes gratuits + 3 th√®mes premium = Site professionnel en 2-4h !
                </p>
                
                <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg rounded-lg p-6 sm:p-8 max-w-2xl mx-auto">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6">üéØ Cr√©er mon site professionnel</h3>
                    
                    <form id="websiteForm" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <input type="text" id="businessName" placeholder="Nom de votre entreprise" 
                                   class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                            
                            <select id="siteType" class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                                <option value="">Type de site</option>
                                <option value="restaurant">üçΩÔ∏è Restaurant</option>
                                <option value="salon">üíá Salon de beaut√©</option>
                                <option value="commerce">üè™ Commerce/Boutique</option>
                                <option value="service">üîß Service professionnel</option>
                                <option value="medical">üè• Cabinet m√©dical</option>
                                <option value="immobilier">üè† Immobilier</option>
                                <option value="hotel">üè® H√¥tel/H√©bergement</option>
                                <option value="fitness">üí™ Salle de sport</option>
                                <option value="location-voiture">üöó Location de voiture</option>
                                <option value="avocat">‚öñÔ∏è Cabinet d'avocat</option>
                                <option value="photographe">üì∏ Photographe</option>
                                <option value="plombier">üîß Plomberie</option>
                                <option value="electricien">‚ö° √âlectricien</option>
                                <option value="garage">üîß Garage automobile</option>
                                <option value="autre">‚ú® Autre activit√©</option>
                            </select>
                        </div>
                        
                        <textarea id="description" placeholder="D√©crivez votre activit√© et vos services en d√©tail..." 
                                  class="w-full p-3 rounded-lg text-gray-800 font-medium h-24" required></textarea>
                        
                        <input type="email" id="userEmail" placeholder="Votre email pour recevoir le site" 
                               class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                        
                        <!-- Upload de photos -->
                        <div class="photo-upload-area" id="photoUploadArea">
                            <div class="mb-4">
                                <i class="fas fa-camera text-4xl text-gray-400 mb-2"></i>
                                <h4 class="text-gray-800 font-bold text-lg mb-2">üì∏ Ajoutez vos photos (optionnel)</h4>
                                <p class="text-gray-600 text-sm mb-4">
                                    Glissez vos images ici ou cliquez pour s√©lectionner<br>
                                    <span class="text-xs">JPG, PNG, WebP - Max 5 Mo par image</span>
                                </p>
                                <input type="file" id="photoInput" multiple accept="image/*" class="hidden">
                                <button type="button" onclick="document.getElementById('photoInput').click()" 
                                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-sm">
                                    <i class="fas fa-upload mr-2"></i>Choisir des photos
                                </button>
                            </div>
                            <div id="photoPreview" class="grid grid-cols-3 gap-2 mt-4 hidden"></div>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-4 px-6 rounded-lg transform hover:scale-105 transition-all duration-200 text-lg">
                            üé® CHOISIR UN TH√àME & PR√âVISUALISER
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Templates de qualit√© -->
        <section id="qualityTemplates" class="quality-templates py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">üé® Choisissez votre th√®me professionnel</h3>
                    <p class="text-xl text-gray-600">7 th√®mes gratuits + 3 th√®mes premium √† 5‚Ç¨</p>
                </div>
                
                <div id="templateGrid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
                    <!-- Les templates seront g√©n√©r√©s dynamiquement -->
                </div>
                
                <div class="text-center mt-8">
                    <button onclick="proceedWithSelectedTemplate()" id="continueBtn" 
                            class="bg-green-500 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-green-600 disabled:opacity-50" disabled>
                        <i class="fas fa-eye mr-2"></i>VOIR LA PR√âVISUALISATION
                    </button>
                </div>
            </div>
        </section>

        <!-- Service Conciergerie -->
        <section class="py-16 bg-gray-50 fade-in">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-4">
                        ü§ñ IA Professionnelle + Service Conciergerie
                    </h3>
                    <p class="text-lg sm:text-xl text-gray-600">
                        Notre IA cr√©e des sites de qualit√© agence web !
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                    <!-- Offre Site Seul -->
                    <div class="bg-white rounded-lg shadow-lg p-6 sm:p-8 card-hover">
                        <div class="text-center">
                            <h4 class="text-xl sm:text-2xl font-bold text-gray-800 mb-4">üìÑ Site IA Professionnel</h4>
                            <div class="text-3xl sm:text-4xl font-bold text-blue-600 mb-4">15‚Ç¨</div>
                            <ul class="text-left space-y-2 mb-6 text-sm sm:text-base">
                                <li>‚úÖ 7 th√®mes gratuits + 3 premium (+5‚Ç¨)</li>
                                <li>‚úÖ Int√©gration de vos photos personnelles</li>
                                <li>‚úÖ Templates ultra-modernes</li>
                                <li>‚úÖ Pr√©visualisation et modifications</li>
                                <li>‚úÖ Code source optimis√©</li>
                                <li>‚úÖ Livraison par email instantan√©e</li>
                                <li>‚ùå Pas d'h√©bergement inclus</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Offre Conciergerie -->
                    <div class="bg-gradient-to-br from-green-500 to-blue-600 text-white rounded-lg shadow-lg p-6 sm:p-8 card-hover relative">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-orange-500 px-3 py-1 rounded-full text-xs sm:text-sm font-bold">
                            üî• LE PLUS POPULAIRE
                        </div>
                        <div class="text-center mt-4">
                            <h4 class="text-xl sm:text-2xl font-bold mb-4">ü§ñ Conciergerie IA Compl√®te</h4>
                            <div class="text-3xl sm:text-4xl font-bold mb-4">49‚Ç¨</div>
                            <ul class="text-left space-y-2 mb-6 text-sm sm:text-base">
                                <li>‚úÖ Tout inclus + tous les th√®mes premium</li>
                                <li>‚úÖ <strong>Nom de domaine automatique</strong></li>
                                <li>‚úÖ <strong>H√©bergement premium configur√©</strong></li>
                                <li>‚úÖ <strong>Site en ligne en 2-4h maximum</strong></li>
                                <li>‚úÖ <strong>Optimisation SEO automatique</strong></li>
                                <li>‚úÖ <strong>Support technique 3 mois</strong></li>
                                <li>‚úÖ <strong>Formation utilisateur incluse</strong></li>
                            </ul>
                            <div class="bg-yellow-400 text-gray-800 p-3 rounded-lg text-xs sm:text-sm font-bold mb-4">
                                ‚è∞ Site professionnel en ligne en 2-4h !<br>
                                üé® Tous les th√®mes premium inclus
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Section Pr√©visualisation -->
    <div id="previewSection" class="preview-section min-h-screen bg-gray-100 py-8">
        <div class="container mx-auto px-4">
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">
                        üéâ Pr√©visualisation : <span id="previewBusinessName"></span>
                    </h2>
                    <button onclick="goBackToTemplates()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                        <i class="fas fa-arrow-left"></i> Changer de th√®me
                    </button>
                </div>
                
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Aper√ßu du site -->
                    <div>
                        <h3 class="text-lg font-bold mb-4">üì± Aper√ßu de votre site</h3>
                        <div id="websitePreview" class="border-2 border-gray-300 rounded-lg bg-white overflow-auto" style="height: 500px;">
                            <!-- Le contenu sera g√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                    
                    <!-- Options de personnalisation -->
                    <div>
                        <h3 class="text-lg font-bold mb-4">‚úèÔ∏è Personnalisez votre site</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold mb-2">Couleur principale</label>
                                <input type="color" id="primaryColor" value="#3b82f6" class="w-full h-10 rounded">
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Titre principal</label>
                                <input type="text" id="mainTitle" class="w-full p-3 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Sous-titre</label>
                                <textarea id="subtitle" class="w-full p-3 border rounded-lg h-20"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">T√©l√©phone</label>
                                <input type="tel" id="phone" class="w-full p-3 border rounded-lg" placeholder="01 23 45 67 89">
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Adresse</label>
                                <input type="text" id="address" class="w-full p-3 border rounded-lg" placeholder="123 Rue Example, Paris">
                            </div>
                            <button onclick="updatePreview()" class="w-full bg-blue-500 text-white py-3 rounded hover:bg-blue-600">
                                üîÑ Mettre √† jour l'aper√ßu
                            </button>
                        </div>
                        
                        <!-- Choix de l'offre -->
                        <div class="mt-8 border-t pt-6">
                            <h3 class="text-lg font-bold mb-4">üí≥ Finaliser votre commande</h3>
                            <div id="templateCostInfo" class="mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <!-- Info sur le co√ªt du template -->
                            </div>
                            <div class="space-y-4">
                                <div class="border rounded-lg p-4 cursor-pointer hover:bg-blue-50" onclick="selectOffer('site')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-bold">üìÑ Site IA Pro</h4>
                                            <p class="text-sm text-gray-600">Code source + Photos + Livraison email</p>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-blue-600" id="sitePrice">15‚Ç¨</div>
                                            <input type="radio" name="offer" value="site" class="offer-radio mt-1">
                                        </div>
                                    </div>
                                </div>
                                <div class="border rounded-lg p-4 cursor-pointer hover:bg-green-50 border-green-500" onclick="selectOffer('conciergerie')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-bold">ü§ñ Conciergerie IA - 49‚Ç¨ ‚≠ê</h4>
                                            <p class="text-sm text-gray-600">Site + Domaine + H√©bergement + Tous les th√®mes premium</p>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-green-600">49‚Ç¨</div>
                                            <input type="radio" name="offer" value="conciergerie" class="offer-radio mt-1" checked>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button id="payButton" onclick="processPayment()" class="w-full mt-6 bg-green-500 text-white py-4 px-6 rounded-lg font-bold text-lg hover:bg-green-600 transform hover:scale-105 transition-all">
                                üí≥ COMMANDER MAINTENANT - 49‚Ç¨
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal d'authentification -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 id="authModalTitle" class="text-2xl font-bold">Connexion</h2>
                <button onclick="closeAuthModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <!-- Connexion -->
            <div id="loginForm" class="auth-section">
                <form onsubmit="login(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold mb-2">Email</label>
                        <input type="email" id="loginEmail" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Mot de passe</label>
                        <input type="password" id="loginPassword" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600">
                        Se connecter
                    </button>
                </form>
                <p class="mt-4 text-center">
                    <a href="#" onclick="showRegisterForm()" class="text-blue-500 hover:underline">Pas de compte ? S'inscrire</a>
                </p>
            </div>
            
            <!-- Inscription -->
            <div id="registerForm" class="auth-section">
                <form onsubmit="register(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold mb-2">Nom complet</label>
                        <input type="text" id="registerName" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Email</label>
                        <input type="email" id="registerEmail" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Mot de passe</label>
                        <input type="password" id="registerPassword" class="w-full p-3 border rounded-lg" required>
                    </div>
                    <button type="submit" class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600">
                        S'inscrire
                    </button>
                </form>
                <p class="mt-4 text-center">
                    <a href="#" onclick="showLoginForm()" class="text-blue-500 hover:underline">D√©j√† un compte ? Se connecter</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let currentOffer = 'conciergerie';
        let websiteData = {};
        let selectedTemplate = null;
        let uploadedPhotos = [];
        let templates = [];

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            if (currentUser) {
                showUserMenu();
            }
            
            const form = document.getElementById('websiteForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    generateTemplates();
                });
            }

            setupPhotoUpload();
        });

        // Configuration de l'upload de photos
        function setupPhotoUpload() {
            const uploadArea = document.getElementById('photoUploadArea');
            const photoInput = document.getElementById('photoInput');
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                handleFiles(e.dataTransfer.files);
            });
            
            photoInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
        }

        function handleFiles(files) {
            for (let file of files) {
                if (file.type.startsWith('image/') && file.size <= 5 * 1024 * 1024) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        uploadedPhotos.push({
                            name: file.name,
                            data: e.target.result
                        });
                        displayPhotoPreview();
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function displayPhotoPreview() {
            const preview = document.getElementById('photoPreview');
            preview.innerHTML = '';
            preview.classList.remove('hidden');
            
            uploadedPhotos.forEach((photo, index) => {
                const div = document.createElement('div');
                div.className = 'relative';
                div.innerHTML = `
                    <img src="${photo.data}" alt="${photo.name}" class="w-full h-24 object-cover rounded">
                    <button onclick="removePhoto(${index})" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 text-xs">√ó</button>
                `;
                preview.appendChild(div);
            });
        }

        function removePhoto(index) {
            uploadedPhotos.splice(index, 1);
            displayPhotoPreview();
            if (uploadedPhotos.length === 0) {
                document.getElementById('photoPreview').classList.add('hidden');
            }
        }

        // G√©n√©ration de templates
        function generateTemplates() {
            const businessName = document.getElementById('businessName').value.trim();
            const description = document.getElementById('description').value.trim();
            const siteType = document.getElementById('siteType').value;
            const userEmail = document.getElementById('userEmail').value.trim();

            if (!businessName || !description || !siteType || !userEmail) {
                showNotification('‚ùå Veuillez remplir tous les champs obligatoires !');
                return;
            }

            websiteData = {
                businessName,
                description,
                siteType,
                userEmail,
                photos: uploadedPhotos,
                mainTitle: businessName,
                subtitle: description,
                primaryColor: '#3b82f6',
                phone: '',
                address: ''
            };

            // G√©n√©rer les templates imm√©diatement
            templates = getAllTemplates();
            displayTemplates();
            
            // Afficher la section des templates
            document.getElementById('mainSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'block';
            
            showNotification('‚úÖ Choisissez votre th√®me parmi 10 options !');
        }

        function getAllTemplates() {
            return [
                // 7 TH√àMES GRATUITS
                {
                    name: 'Modern Clean',
                    description: 'Design √©pur√© et moderne',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 60px; height: 4px; background: #3b82f6; margin: 0 auto 10px;"></div><div style="font-size: 16px; font-weight: bold;">MODERN</div><div style="font-size: 12px;">Clean & Simple</div></div>',
                    gradient: 'from-blue-400 to-blue-600',
                    isPremium: false,
                    colors: { primary: '#3b82f6', secondary: '#1e40af' }
                },
                {
                    name: 'Business Pro',
                    description: 'Professionnel et √©l√©gant',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 40px; height: 40px; border: 3px solid #374151; border-radius: 50%; margin: 0 auto 10px;"></div><div style="font-size: 16px; font-weight: bold;">BUSINESS</div><div style="font-size: 12px;">Professional</div></div>',
                    gradient: 'from-gray-600 to-gray-800',
                    isPremium: false,
                    colors: { primary: '#374151', secondary: '#111827' }
                },
                {
                    name: 'Creative Studio',
                    description: 'Cr√©atif et artistique',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 50px; height: 30px; background: linear-gradient(45deg, #f59e0b, #ef4444); margin: 0 auto 10px; border-radius: 5px;"></div><div style="font-size: 16px; font-weight: bold;">CREATIVE</div><div style="font-size: 12px;">Artistic Design</div></div>',
                    gradient: 'from-orange-400 to-red-500',
                    isPremium: false,
                    colors: { primary: '#f59e0b', secondary: '#dc2626' }
                },
                {
                    name: 'Fresh Green',
                    description: 'Nature et √©co-responsable',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 40px; height: 40px; background: #10b981; border-radius: 50%; margin: 0 auto 10px; position: relative;"><div style="position: absolute; top: 15px; left: 15px; width: 10px; height: 10px; background: white; border-radius: 50%;"></div></div><div style="font-size: 16px; font-weight: bold;">ECO</div><div style="font-size: 12px;">Green & Natural</div></div>',
                    gradient: 'from-green-400 to-emerald-600',
                    isPremium: false,
                    colors: { primary: '#10b981', secondary: '#047857' }
                },
                {
                    name: 'Tech Innovation',
                    description: 'High-tech et futuriste',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 50px; height: 20px; background: linear-gradient(90deg, #8b5cf6, #06b6d4); margin: 0 auto 10px; border-radius: 10px;"></div><div style="font-size: 16px; font-weight: bold;">TECH</div><div style="font-size: 12px;">Innovation</div></div>',
                    gradient: 'from-purple-500 to-cyan-500',
                    isPremium: false,
                    colors: { primary: '#8b5cf6', secondary: '#7c3aed' }
                },
                {
                    name: 'Warm Elegance',
                    description: 'Chaleureux et accueillant',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 45px; height: 45px; background: linear-gradient(135deg, #f97316, #ea580c); margin: 0 auto 10px; border-radius: 8px;"></div><div style="font-size: 16px; font-weight: bold;">WARM</div><div style="font-size: 12px;">Elegant & Cozy</div></div>',
                    gradient: 'from-orange-500 to-amber-600',
                    isPremium: false,
                    colors: { primary: '#f97316', secondary: '#ea580c' }
                },
                {
                    name: 'Classic Minimal',
                    description: 'Classique et minimaliste',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 60px; height: 2px; background: #6b7280; margin: 0 auto 5px;"></div><div style="width: 40px; height: 2px; background: #6b7280; margin: 0 auto 10px;"></div><div style="font-size: 16px; font-weight: bold;">MINIMAL</div><div style="font-size: 12px;">Less is More</div></div>',
                    gradient: 'from-slate-400 to-slate-600',
                    isPremium: false,
                    colors: { primary: '#6b7280', secondary: '#374151' }
                },
                
                // 3 TH√àMES PREMIUM (+5‚Ç¨)
                {
                    name: 'Luxury Gold',
                    description: 'Premium avec animations dor√©es',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 50px; height: 50px; background: linear-gradient(45deg, #fbbf24, #f59e0b); margin: 0 auto 10px; border-radius: 50%; position: relative; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);"><div style="position: absolute; top: 20px; left: 20px; width: 10px; height: 10px; background: white; border-radius: 50%;"></div></div><div style="font-size: 16px; font-weight: bold; color: #f59e0b;">LUXURY</div><div style="font-size: 12px;">Premium Gold</div></div>',
                    gradient: 'from-yellow-400 to-amber-600',
                    isPremium: true,
                    colors: { primary: '#f59e0b', secondary: '#d97706' }
                },
                {
                    name: 'Royal Purple',
                    description: 'Design royal avec effets premium',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 45px; height: 45px; background: linear-gradient(135deg, #a855f7, #7c3aed); margin: 0 auto 10px; border-radius: 12px; position: relative; box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);"><div style="position: absolute; top: 5px; right: 5px; width: 8px; height: 8px; background: white; border-radius: 50%;"></div></div><div style="font-size: 16px; font-weight: bold; color: #7c3aed;">ROYAL</div><div style="font-size: 12px;">Premium Purple</div></div>',
                    gradient: 'from-purple-500 to-indigo-600',
                    isPremium: true,
                    colors: { primary: '#a855f7', secondary: '#7c3aed' }
                },
                {
                    name: 'Diamond Elite',
                    description: 'Ultra-premium avec cristaux',
                    preview: '<div style="text-align: center; padding: 20px;"><div style="width: 50px; height: 30px; background: linear-gradient(45deg, #e5e7eb, #d1d5db, #9ca3af); margin: 0 auto 10px; border-radius: 5px; position: relative; box-shadow: 0 4px 25px rgba(156, 163, 175, 0.5);"><div style="position: absolute; top: 8px; left: 20px; width: 10px; height: 14px; background: white; clip-path: polygon(50% 0%, 0% 100%, 100% 100%);"></div></div><div style="font-size: 16px; font-weight: bold; background: linear-gradient(45deg, #6b7280, #374151); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">DIAMOND</div><div style="font-size: 12px;">Ultra Premium</div></div>',
                    gradient: 'from-slate-400 to-slate-700',
                    isPremium: true,
                    colors: { primary: '#6b7280', secondary: '#374151' }
                }
            ];
        }

        function displayTemplates() {
            const templateGrid = document.getElementById('templateGrid');
            templateGrid.innerHTML = '';
            
            templates.forEach((template, index) => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card bg-white rounded-xl shadow-lg p-4 border-2 border-gray-200 relative';
                templateCard.onclick = () => selectTemplate(index);
                
                let premiumBadge = '';
                if (template.isPremium) {
                    premiumBadge = '<div class="premium-badge">üíé +5‚Ç¨</div>';
                }
                
                templateCard.innerHTML = `
                    ${premiumBadge}
                    <div class="mb-4">
                        <div class="bg-gradient-to-br ${template.gradient} h-24 rounded-lg flex items-center justify-center text-white font-bold text-sm shadow-inner">
                            ${template.preview}
                        </div>
                    </div>
                    <div class="text-center">
                        <h4 class="font-bold text-lg mb-1">${template.name}</h4>
                        <p class="text-gray-600 text-xs mb-3">${template.description}</p>
                        <div class="text-center">
                            <span class="text-xs font-bold ${template.isPremium ? 'text-yellow-600' : 'text-green-600'}">
                                ${template.isPremium ? 'Premium +5‚Ç¨' : 'Gratuit'}
                            </span>
                        </div>
                    </div>
                `;
                
                templateGrid.appendChild(templateCard);
            });
        }

        function selectTemplate(index) {
            // D√©s√©lectionner les autres templates
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // S√©lectionner le template actuel
            const selectedCard = document.querySelectorAll('.template-card')[index];
            selectedCard.classList.add('selected');
            
            selectedTemplate = index;
            
            // Activer le bouton continuer
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.disabled = false;
            continueBtn.classList.remove('disabled:opacity-50');
            
            // Mettre √† jour les couleurs selon le template s√©lectionn√©
            if (templates[index]) {
                websiteData.primaryColor = templates[index].colors.primary;
            }
            
            showNotification(`‚úÖ Th√®me "${templates[index].name}" s√©lectionn√© !`);
        }

        function proceedWithSelectedTemplate() {
            if (selectedTemplate === null) return;
            generatePreview();
        }

        // G√©n√©ration de la pr√©visualisation (CORRIG√âE - Plus d'√©cran blanc)
        function generatePreview() {
            // S'assurer que les donn√©es sont pr√™tes
            if (!websiteData.businessName) {
                showNotification('‚ùå Erreur dans les donn√©es du site');
                return;
            }

            // Pr√©-remplir les champs
            document.getElementById('previewBusinessName').textContent = websiteData.businessName;
            document.getElementById('mainTitle').value = websiteData.businessName;
            document.getElementById('subtitle').value = websiteData.description;
            document.getElementById('primaryColor').value = websiteData.primaryColor;
            
            // Mettre √† jour l'info sur le co√ªt du template
            updateTemplateCostInfo();
            
            // G√©n√©rer imm√©diatement l'aper√ßu
            updatePreview();
            
            // Afficher la section de pr√©visualisation
            document.getElementById('qualityTemplates').style.display = 'none';
            document.getElementById('previewSection').style.display = 'block';
            
            window.scrollTo(0, 0);
            showNotification('‚úÖ Pr√©visualisation charg√©e ! Personnalisez votre site.');
        }

        function updateTemplateCostInfo() {
            const template = templates[selectedTemplate];
            const costInfo = document.getElementById('templateCostInfo');
            
            if (template && template.isPremium) {
                costInfo.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div>
                            <span class="font-bold">üíé Th√®me Premium "${template.name}"</span>
                            <p class="text-sm text-gray-600">Co√ªt suppl√©mentaire du th√®me premium</p>
                        </div>
                        <div class="font-bold text-yellow-600">+5‚Ç¨</div>
                    </div>
                `;
                costInfo.style.display = 'block';
            } else {
                costInfo.innerHTML = `
                    <div class="text-center">
                        <span class="font-bold text-green-600">‚úÖ Th√®me gratuit "${template ? template.name : 'Standard'}" inclus</span>
                    </div>
                `;
                costInfo.style.display = 'block';
            }
        }

        function updatePreview() {
            const mainTitle = document.getElementById('mainTitle').value || websiteData.businessName;
            const subtitle = document.getElementById('subtitle').value || websiteData.description;
            const primaryColor = document.getElementById('primaryColor').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;

            // Mettre √† jour les donn√©es
            websiteData.mainTitle = mainTitle;
            websiteData.subtitle = subtitle;
            websiteData.primaryColor = primaryColor;
            websiteData.phone = phone;
            websiteData.address = address;

            // G√©n√©rer le contenu avec le template s√©lectionn√©
            const siteContent = generateBeautifulSiteContent();
            document.getElementById('websitePreview').innerHTML = siteContent;
        }

        function generateBeautifulSiteContent() {
            const { mainTitle, subtitle, primaryColor, phone, address, siteType, photos } = websiteData;
            const template = templates[selectedTemplate];
            
            // Header magnifique avec le style du template
            let content = `
                <div style="background: linear-gradient(135deg, ${primaryColor}, ${template ? template.colors.secondary : '#1e40af'}); color: white; padding: 40px 30px; text-align: center; border-radius: 0; margin: 0; position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -50px; right: -50px; width: 100px; height: 100px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
                    <div style="position: absolute; bottom: -30px; left: -30px; width: 80px; height: 80px; background: rgba(255,255,255,0.05); border-radius: 50%;"></div>
                    <h1 style="font-size: 2.8rem; font-weight: 900; margin-bottom: 15px; text-shadow: 0 4px 8px rgba(0,0,0,0.3); letter-spacing: -1px;">${mainTitle}</h1>
                    <p style="font-size: 1.3rem; opacity: 0.95; max-width: 500px; margin: 0 auto 25px; line-height: 1.6;">${subtitle}</p>
                    <div style="display: inline-flex; background: rgba(255,255,255,0.2); padding: 12px 24px; border-radius: 25px; backdrop-filter: blur(10px);">
                        <span style="font-weight: bold; font-size: 1rem;">üåü Site Professionnel</span>
                    </div>
                </div>
            `;

            // Section photos si disponibles
            if (photos && photos.length > 0) {
                content += `
                    <div style="padding: 50px 30px; background: linear-gradient(45deg, #f8fafc, #ffffff);">
                        <div style="text-align: center; margin-bottom: 40px;">
                            <h2 style="color: ${primaryColor}; font-size: 2.2rem; font-weight: 800; margin-bottom: 15px;">üì∏ Nos R√©alisations</h2>
                            <div style="width: 80px; height: 4px; background: ${primaryColor}; margin: 0 auto; border-radius: 2px;"></div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px;">
                            ${photos.slice(0, 6).map(photo => `
                                <div style="position: relative; overflow: hidden; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s;">
                                    <img src="${photo.data}" alt="${photo.name}" style="width: 100%; height: 140px; object-fit: cover;">
                                    <div style="position: absolute; inset: 0; background: linear-gradient(135deg, ${primaryColor}22, transparent);"></div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Contenu sp√©cifique beaut√© selon le secteur
            content += generateSectorContent();

            // Section contact magnifique
            if (phone || address) {
                content += `
                    <div style="background: linear-gradient(135deg, ${primaryColor}, ${template ? template.colors.secondary : '#1e40af'}); color: white; padding: 50px 30px; margin: 0; position: relative;">
                        <div style="position: absolute; top: -20px; right: 50px; width: 60px; height: 60px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
                        <div style="text-align: center; margin-bottom: 35px;">
                            <h2 style="font-size: 2.2rem; font-weight: 800; margin-bottom: 15px;">üìû Contactez-nous</h2>
                            <div style="width: 80px; height: 4px; background: rgba(255,255,255,0.3); margin: 0 auto;"></div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; max-width: 600px; margin: 0 auto;">
                            ${phone ? `
                                <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 15px; text-align: center; backdrop-filter: blur(10px);">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">üì±</div>
                                    <div style="font-weight: bold; margin-bottom: 8px;">T√©l√©phone</div>
                                    <div style="font-size: 1.2rem; font-weight: 600;">${phone}</div>
                                </div>
                            ` : ''}
                            ${address ? `
                                <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 15px; text-align: center; backdrop-filter: blur(10px);">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">üìç</div>
                                    <div style="font-weight: bold; margin-bottom: 8px;">Adresse</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; line-height: 1.4;">${address}</div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }

            // Footer CTA magnifique
            content += `
                <div style="text-align: center; padding: 60px 30px; background: linear-gradient(45deg, #f1f5f9, #e2e8f0); margin: 0;">
                    <h3 style="font-size: 2.5rem; font-weight: 900; color: ${primaryColor}; margin-bottom: 20px;">üåü Pr√™t √† commencer ?</h3>
                    <p style="font-size: 1.2rem; color: #64748b; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto;">D√©couvrez l'excellence de nos services d√®s aujourd'hui</p>
                    <div style="display: inline-flex; background: linear-gradient(135deg, ${primaryColor}, ${template ? template.colors.secondary : '#1e40af'}); color: white; padding: 18px 40px; border-radius: 30px; font-weight: bold; font-size: 1.1rem; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);">
                        üí´ Contactez-nous maintenant
                    </div>
                </div>
            `;

            return content;
        }

        function generateSectorContent() {
            const { primaryColor, siteType } = websiteData;
            const template = templates[selectedTemplate];

            let sectorContent = `
                <div style="padding: 60px 30px; background: white;">
                    <div style="text-align: center; margin-bottom: 50px;">
                        <h2 style="color: ${primaryColor}; font-size: 2.5rem; font-weight: 900; margin-bottom: 20px;">
            `;

            switch(siteType) {
                case 'location-voiture':
                    sectorContent += `üöó Notre Flotte Premium</h2>
                        <p style="font-size: 1.2rem; color: #64748b; max-width: 600px; margin: 0 auto;">V√©hicules haut de gamme pour tous vos d√©placements</p>
                        <div style="width: 100px; height: 4px; background: ${primaryColor}; margin: 20px auto; border-radius: 2px;"></div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                        <div style="background: linear-gradient(135deg, #f8fafc, #ffffff); padding: 35px; border-radius: 20px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.08); border: 2px solid #f1f5f9;">
                            <div style="font-size: 4rem; margin-bottom: 20px;">üöó</div>
                            <h3 style="font-size: 1.8rem; font-weight: bold; color: ${primaryColor}; margin-bottom: 15px;">Citadines</h3>
                            <div style="font-size: 2rem; font-weight: 900; color: #10b981; margin-bottom: 15px;">25‚Ç¨<span style="font-size: 1rem; font-weight: normal;">/jour</span></div>
                            <p style="color: #64748b; margin-bottom: 20px;">Parfait pour la ville</p>
                            <div style="background: ${primaryColor}; color: white; padding: 12px 25px; border-radius: 25px; display: inline-block; font-weight: bold;">Peugeot 208 ‚Ä¢ Renault Clio</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f8fafc, #ffffff); padding: 35px; border-radius: 20px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.08); border: 2px solid #f1f5f9;">
                            <div style="font-size: 4rem; margin-bottom: 20px;">üöô</div>
                            <h3 style="font-size: 1.8rem; font-weight: bold; color: ${primaryColor}; margin-bottom: 15px;">SUV Premium</h3>
                            <div style="font-size: 2rem; font-weight: 900; color: #10b981; margin-bottom: 15px;">45‚Ç¨<span style="font-size: 1rem; font-weight: normal;">/jour</span></div>
                            <p style="color: #64748b; margin-bottom: 20px;">Confort et espace</p>
                            <div style="background: ${primaryColor}; color: white; padding: 12px 25px; border-radius: 25px; display: inline-block; font-weight: bold;">BMW X3 ‚Ä¢ Audi Q5</div>
                        </div>
                        <div style="background: linear-gradient(135deg, ${primaryColor}22, #ffffff); padding: 35px; border-radius: 20px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.12); border: 2px solid ${primaryColor};">
                            <div style="font-size: 4rem; margin-bottom: 20px;">üèéÔ∏è</div>
                            <h3 style="font-size: 1.8rem; font-weight: bold; color: ${primaryColor}; margin-bottom: 15px;">Luxury</h3>
                            <div style="font-size: 2rem; font-weight: 900; color: #10b981; margin-bottom: 15px;">89‚Ç¨<span style="font-size: 1rem; font-weight: normal;">/jour</span></div>
                            <p style="color: #64748b; margin-bottom: 20px;">Prestige absolu</p>
                            <div style="background: ${primaryColor}; color: white; padding: 12px 25px; border-radius: 25px; display: inline-block; font-weight: bold;">Mercedes ‚Ä¢ BMW S√©rie 5</div>
                        </div>
                    </div>
                `;
                    break;

                case 'restaurant':
                    sectorContent += `üçΩÔ∏è Notre Menu Gastronomique</h2>
                        <p style="font-size: 1.2rem; color: #64748b; max-width: 600px; margin: 0 auto;">Une exp√©rience culinaire exceptionnelle vous attend</p>
                        <div style="width: 100px; height: 4px; background: ${primaryColor}; margin: 20px auto; border-radius: 2px;"></div>
                    </div>
                    <div style="display: grid; gap: 40px; max-width: 800px; margin: 0 auto;">
                        <div style="background: linear-gradient(135deg, #ffffff, #f8fafc); padding: 40px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.08);">
                            <h3 style="font-size: 1.8rem; font-weight: bold; color: ${primaryColor}; margin-bottom: 25px; display: flex; align-items: center;"><span style="margin-right: 15px;">ü•ó</span>Entr√©es Signature</h3>
                            <div style="space-y: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 2px dotted #e2e8f0;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 1.1rem;">Salade Caesar Revisit√©e</div>
                                        <div style="color: #64748b; font-size: 0.9rem;">Parmesan 24 mois, cro√ªtons artisanaux</div>
                                    </div>
                                    <span style="font-weight: 900; color: ${primaryColor}; font-size: 1.2rem;">14‚Ç¨</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 2px dotted #e2e8f0;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 1.1rem;">Carpaccio de Saint-Jacques</div>
                                        <div style="color: #64748b; font-size: 0.9rem;">Agrumes, huile d'olive premium</div>
                                    </div>
                                    <span style="font-weight: 900; color: ${primaryColor}; font-size: 1.2rem;">18‚Ç¨</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                    break;

                case 'salon':
                    sectorContent += `üíá Nos Services Beaut√©</h2>
                        <p style="font-size: 1.2rem; color: #64748b; max-width: 600px; margin: 0 auto;">R√©v√©lez votre beaut√© naturelle avec nos experts</p>
                        <div style="width: 100px; height: 4px; background: ${primaryColor}; margin: 20px auto; border-radius: 2px;"></div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px;">
                        ${['üíá‚Äç‚ôÄÔ∏è Coupe & Brushing - 45‚Ç¨', 'üé® Coloration Premium - 85‚Ç¨', '‚ú® Soins R√©parateurs - 35‚Ç¨', 'üíÜ‚Äç‚ôÄÔ∏è Massage Cr√¢nien - 28‚Ç¨', 'üë∞ Chignon Mariage - 75‚Ç¨', 'üî• Lissage Keratin - 150‚Ç¨'].map(service => `
                            <div style="background: linear-gradient(135deg, #ffffff, ${primaryColor}11); padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.08); border: 1px solid #f1f5f9;">
                                <div style="font-weight: bold; color: ${primaryColor}; font-size: 1.1rem; line-height: 1.4;">${service}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                    break;

                default:
                    sectorContent += `‚ú® Nos Services Excellence</h2>
                        <p style="font-size: 1.2rem; color: #64748b; max-width: 600px; margin: 0 auto;">Des solutions professionnelles adapt√©es √† vos besoins</p>
                        <div style="width: 100px; height: 4px; background: ${primaryColor}; margin: 20px auto; border-radius: 2px;"></div>
                    </div>
                    <div style="display: grid; gap: 30px; max-width: 800px; margin: 0 auto;">
                        <div style="background: linear-gradient(135deg, #ffffff, ${primaryColor}11); padding: 35px; border-radius: 20px; border-left: 6px solid ${primaryColor}; box-shadow: 0 15px 35px rgba(0,0,0,0.08);">
                            <h3 style="font-weight: 900; color: ${primaryColor}; font-size: 1.6rem; margin-bottom: 15px;">üéØ Service Premium</h3>
                            <p style="color: #64748b; font-size: 1.1rem; line-height: 1.6;">D√©couvrez nos services de qualit√© exceptionnelle, con√ßus pour d√©passer vos attentes et vous offrir une exp√©rience unique.</p>
                        </div>
                    </div>
                `;
            }

            return sectorContent + '</div>';
        }

        function goBackToTemplates() {
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'block';
        }

        function selectOffer(type) {
            currentOffer = type;
            
            // Calculer le prix final
            let basePrice = (type === 'site') ? 15 : 49;
            let templateCost = 0;
            
            if (type === 'site' && templates[selectedTemplate] && templates[selectedTemplate].isPremium) {
                templateCost = 5;
            }
            // Pour la conciergerie, tous les th√®mes premium sont inclus
            
            let finalPrice = basePrice + templateCost;
            
            // Mettre √† jour l'affichage des prix
            document.getElementById('sitePrice').textContent = type === 'site' ? `${finalPrice}‚Ç¨` : '15‚Ç¨';
            
            // Mettre √† jour les radio buttons
            document.querySelectorAll('.offer-radio').forEach(radio => {
                radio.checked = radio.value === type;
            });
            
            // Mettre √† jour le bouton de paiement
            const payButton = document.getElementById('payButton');
            payButton.innerHTML = `üí≥ COMMANDER MAINTENANT - ${finalPrice}‚Ç¨`;
            payButton.style.backgroundColor = type === 'site' ? '#3b82f6' : '#10b981';
        }

        function processPayment() {
            if (!currentUser) {
                showNotification('‚ùå Vous devez √™tre connect√© pour effectuer un achat !');
                showLogin();
                return;
            }

            // Calculer le prix final
            let basePrice = (currentOffer === 'site') ? 15 : 49;
            let templateCost = 0;
            
            if (currentOffer === 'site' && templates[selectedTemplate] && templates[selectedTemplate].isPremium) {
                templateCost = 5;
            }
            
            let finalPrice = basePrice + templateCost;
            
            let paypalUrl;
            if (currentOffer === 'site') {
                paypalUrl = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=assakourc@gmail.com&item_name=Site+IA+Pro+Theme+${templates[selectedTemplate].name}+-+IA+WebGen&amount=${finalPrice}.00&currency_code=EUR&return=${encodeURIComponent(window.location.href)}&cancel_return=${encodeURIComponent(window.location.href)}`;
            } else {
                paypalUrl = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=assakourc@gmail.com&item_name=Conciergerie+IA+Complete+Premium+-+IA+WebGen&amount=49.00&currency_code=EUR&return=${encodeURIComponent(window.location.href)}&cancel_return=${encodeURIComponent(window.location.href)}`;
            }

            const orderData = {
                user: currentUser,
                websiteData: websiteData,
                selectedTemplate: selectedTemplate,
                templateInfo: templates[selectedTemplate],
                offer: currentOffer,
                price: finalPrice,
                date: new Date().toISOString()
            };
            localStorage.setItem('pendingOrder', JSON.stringify(orderData));

            const templateName = templates[selectedTemplate] ? templates[selectedTemplate].name : 'Standard';
            const message = `üéâ Commande confirm√©e !\n\n` +
                          `üìã R√©capitulatif :\n` +
                          `‚Ä¢ Th√®me: ${templateName} ${templates[selectedTemplate] && templates[selectedTemplate].isPremium ? '(Premium)' : '(Gratuit)'}\n` +
                          `‚Ä¢ Offre: ${currentOffer === 'site' ? 'Site IA Pro' : 'Conciergerie IA Compl√®te'}\n` +
                          `‚Ä¢ Prix total: ${finalPrice}‚Ç¨\n\n` +
                          `üìß Vous recevrez apr√®s paiement :\n` +
                          `‚Ä¢ Email de confirmation\n` +
                          `‚Ä¢ ${currentOffer === 'site' ? 'Fichiers du site' : 'Site mis en ligne automatiquement'}\n` +
                          `‚Ä¢ Support inclus\n\n` +
                          `Proc√©der au paiement PayPal ?`;

            if (confirm(message)) {
                window.open(paypalUrl, '_blank');
                showNotification('üéâ Redirection PayPal... Commande en cours !');
            }
        }

        // Fonctions d'authentification
        function showLogin() {
            document.getElementById('authModalTitle').textContent = 'Connexion';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('authModal').style.display = 'block';
        }

        function showRegister() {
            document.getElementById('authModalTitle').textContent = 'Inscription';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('authModal').style.display = 'block';
        }

        function showLoginForm() { showLogin(); }
        function showRegisterForm() { showRegister(); }
        function closeAuthModal() { document.getElementById('authModal').style.display = 'none'; }

        function login(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const user = { email, name: email.split('@')[0] };
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            showUserMenu();
            closeAuthModal();
            showNotification('‚úÖ Connexion r√©ussie !');
        }

        function register(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const user = { email, name };
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            showUserMenu();
            closeAuthModal();
            showNotification('‚úÖ Inscription r√©ussie !');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userMenu').style.display = 'none';
            showNotification('D√©connexion r√©ussie !');
        }

        function showUserMenu() {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenu').style.display = 'block';
            document.getElementById('userName').textContent = `üëã ${currentUser.name}`;
        }

        // Fonctions de partage
        function toggleShareMenu() {
            const menu = document.getElementById('shareMenu');
            menu.classList.toggle('hidden');
        }

        function shareOnFacebook() {
            const url = window.location.href;
            const fbUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            window.open(fbUrl, '_blank', 'width=600,height=400');
            showNotification('üéÅ Code SHARE10 activ√© ! 10% de r√©duction !');
            document.getElementById('shareMenu').classList.add('hidden');
        }

        function shareOnTwitter() {
            const url = window.location.href;
            const text = "ü§ñ Incroyable ! IA WebGen cr√©e des sites pros avec 10 th√®mes magnifiques !";
            const twitterUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
            window.open(twitterUrl, '_blank', 'width=600,height=400');
            showNotification('üéÅ Code SHARE10 activ√© ! 10% de r√©duction !');
            document.getElementById('shareMenu').classList.add('hidden');
        }

        function shareOnWhatsApp() {
            const url = window.location.href;
            const text = "ü§ñ Regarde ! IA WebGen cr√©e des sites magnifiques en 2h : ";
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text + url)}`;
            window.open(whatsappUrl, '_blank');
            showNotification('üéÅ Code SHARE10 activ√© ! √âconomisez 10% !');
            document.getElementById('shareMenu').classList.add('hidden');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showNotification('üîó Lien copi√© ! Code promo SHARE10 = -10% !');
                document.getElementById('shareMenu').classList.add('hidden');
            });
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.share-widget')) {
                document.getElementById('shareMenu').classList.add('hidden');
            }
        });

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            text.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
