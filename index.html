<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA WebGen - Créateur de Sites Web Intelligents</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-5px); transition: transform 0.3s ease; }
        .fade-in { animation: fadeIn 0.8s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .preview-section { display: none; }
        .quality-templates { display: none; }
        .smart-requirements { display: none; }
        .photo-upload-area { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 20px; text-align: center; transition: all 0.3s; }
        .photo-upload-area:hover { border-color: #3b82f6; background-color: #f0f9ff; }
        .photo-upload-area.drag-over { border-color: #10b981; background-color: #f0fdf4; }
        .template-card { cursor: pointer; transition: all 0.3s; border: 3px solid transparent; }
        .template-card:hover { transform: scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .template-card.selected { border: 3px solid #10b981; background: #f0fdf4; }
        .premium-badge { position: absolute; top: -8px; right: -8px; background: linear-gradient(45deg, #ffd700, #ffed4e); color: #1f2937; padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; }
        .site-nav { position: sticky; top: 0; z-index: 50; backdrop-filter: blur(10px); }
        .page-content { display: none; }
        .page-content.active { display: block; }
        .nav-link { cursor: pointer; transition: all 0.3s; }
        .nav-link:hover { transform: translateY(-2px); }
        .nav-link.active { font-weight: bold; }
        .notification { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1001; display: none; }
        .requirement-card { border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; transition: all 0.3s; cursor: pointer; }
        .requirement-card:hover { border-color: #3b82f6; transform: translateY(-2px); }
        .requirement-card.selected { border-color: #10b981; background: #f0fdf4; }
        .feature-toggle { margin: 10px 0; }
        .tab-button { padding: 12px 20px; border-radius: 8px; margin-right: 10px; cursor: pointer; transition: all 0.3s; }
        .tab-button.active { background: #3b82f6; color: white; }
        .tab-button:not(.active) { background: #f3f4f6; color: #6b7280; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="font-sans">
    
    <!-- Notification -->
    <div id="notification" class="notification bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
        <span id="notificationText">Message</span>
    </div>

    <!-- Header -->
    <div class="gradient-bg text-white py-4 fade-in">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center flex-wrap">
                <h1 class="text-2xl font-bold">🤖 IA WebGen</h1>
                <div class="flex items-center gap-4">
                    <div class="text-sm">
                        <span class="bg-green-500 px-3 py-1 rounded-full text-xs sm:text-sm">
                            ✨ IA qui génère EXACTEMENT ce que vous voulez !
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section principale -->
    <div id="mainSection">
        <!-- Hero Section -->
        <section class="gradient-bg text-white py-20 fade-in">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl sm:text-5xl font-bold mb-6">
                    🎯 Décrivez votre site, l'IA le crée à la lettre !
                </h2>
                <p class="text-lg sm:text-xl mb-8 opacity-90">
                    Notre IA comprend vos besoins exacts et génère un site professionnel personnalisé
                </p>
                
                <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg rounded-lg p-6 sm:p-8 max-w-2xl mx-auto">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6">🚀 Commencer la création</h3>
                    
                    <form id="websiteForm" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <input type="text" id="businessName" placeholder="Nom de votre entreprise" 
                                   class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                            
                            <select id="siteType" class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                                <option value="">Type d'activité</option>
                                <option value="restaurant">🍽️ Restaurant</option>
                                <option value="ecommerce">🛍️ E-commerce/Boutique</option>
                                <option value="salon">💇 Salon de beauté</option>
                                <option value="service">🔧 Service professionnel</option>
                                <option value="medical">🏥 Cabinet médical</option>
                                <option value="immobilier">🏠 Immobilier</option>
                                <option value="hotel">🏨 Hôtel</option>
                                <option value="fitness">💪 Salle de sport</option>
                                <option value="location-voiture">🚗 Location de voiture</option>
                                <option value="avocat">⚖️ Cabinet d'avocat</option>
                                <option value="photographe">📸 Photographe</option>
                                <option value="artisan">🔧 Artisan</option>
                                <option value="autre">✨ Autre activité</option>
                            </select>
                        </div>
                        
                        <textarea id="description" placeholder="Décrivez votre activité et vos services..." 
                                  class="w-full p-3 rounded-lg text-gray-800 font-medium h-24" required></textarea>
                        
                        <input type="email" id="userEmail" placeholder="Votre email" 
                               class="w-full p-3 rounded-lg text-gray-800 font-medium" required>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-4 px-6 rounded-lg transform hover:scale-105 transition-all duration-200 text-lg">
                            🎯 ANALYSER MES BESOINS
                        </button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <!-- Section Besoins Intelligents -->
    <section id="smartRequirements" class="smart-requirements py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-gray-800 mb-4">🎯 Personnalisez votre site exactement</h3>
                <p class="text-xl text-gray-600">Sélectionnez EXACTEMENT ce que vous voulez</p>
                <button onclick="goBackToMain()" class="mt-4 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600">
                    <i class="fas fa-arrow-left mr-2"></i>Modifier les informations
                </button>
            </div>
            
            <div class="max-w-6xl mx-auto">
                <!-- Pages de base -->
                <div class="mb-8">
                    <h4 class="text-2xl font-bold text-gray-800 mb-6">📄 Pages essentielles</h4>
                    <div id="basicPages" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Généré dynamiquement -->
                    </div>
                </div>

                <!-- Fonctionnalités avancées -->
                <div class="mb-8">
                    <h4 class="text-2xl font-bold text-gray-800 mb-6">🚀 Fonctionnalités avancées</h4>
                    <div id="advancedFeatures" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Généré dynamiquement -->
                    </div>
                </div>

                <!-- Demandes personnalisées -->
                <div class="mb-8">
                    <h4 class="text-2xl font-bold text-gray-800 mb-6">💬 Demandes spécifiques</h4>
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <textarea id="customRequests" 
                                  placeholder="Décrivez exactement ce que vous voulez (ex: 'Je veux un système de réservation avec calendrier', 'Je veux une boutique avec panier d'achat', 'Je veux un blog avec commentaires')..." 
                                  class="w-full p-4 border rounded-lg h-32 resize-none"></textarea>
                    </div>
                </div>

                <!-- Upload de photos -->
                <div class="mb-8">
                    <h4 class="text-2xl font-bold text-gray-800 mb-6">📸 Vos images</h4>
                    <div class="photo-upload-area bg-white rounded-lg" id="photoUploadArea">
                        <div class="mb-4">
                            <i class="fas fa-camera text-4xl text-blue-500 mb-2"></i>
                            <h4 class="text-gray-800 font-bold text-lg mb-2">Ajoutez vos photos</h4>
                            <p class="text-gray-600 text-sm mb-4">
                                Glissez vos images ici ou cliquez pour sélectionner
                            </p>
                            <input type="file" id="photoInput" multiple accept="image/*" class="hidden">
                            <button type="button" onclick="document.getElementById('photoInput').click()" 
                                    class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-sm">
                                <i class="fas fa-upload mr-2"></i>Choisir des photos
                            </button>
                        </div>
                        <div id="photoPreview" class="grid grid-cols-3 gap-2 mt-4 hidden"></div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="generateCustomSite()" id="generateBtn" 
                        class="bg-green-500 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-green-600 transform hover:scale-105 transition-all">
                    <i class="fas fa-magic mr-2"></i>GÉNÉRER MON SITE PERSONNALISÉ
                </button>
            </div>
        </div>
    </section>

    <!-- Section Templates -->
    <section id="qualityTemplates" class="quality-templates py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-gray-800 mb-4">🎨 Choisissez votre design</h3>
                <p class="text-xl text-gray-600">Sélectionnez le thème qui correspond à votre style</p>
                <button onclick="goBackToRequirements()" class="mt-4 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600">
                    <i class="fas fa-arrow-left mr-2"></i>Modifier les besoins
                </button>
            </div>
            
            <div id="templateGrid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
                <!-- Les templates seront générés ici -->
            </div>
            
            <div class="text-center mt-8">
                <button onclick="proceedWithSelectedTemplate()" id="continueBtn" 
                        class="bg-green-500 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    <i class="fas fa-eye mr-2"></i>GÉNÉRER LA PRÉVISUALISATION
                </button>
            </div>
        </div>
    </section>

    <!-- Section Prévisualisation -->
    <section id="previewSection" class="preview-section min-h-screen bg-gray-100 py-8">
        <div class="container mx-auto px-4">
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">
                        🎉 Votre site personnalisé : <span id="previewBusinessName"></span>
                    </h2>
                    <div class="flex gap-3">
                        <button onclick="goBackToTemplates()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                            <i class="fas fa-palette mr-2"></i>Changer de design
                        </button>
                        <button onclick="goBackToRequirements()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            <i class="fas fa-edit mr-2"></i>Modifier les besoins
                        </button>
                    </div>
                </div>
                
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Aperçu du site -->
                    <div>
                        <h3 class="text-lg font-bold mb-4">🖥️ Votre site web</h3>
                        <p class="text-sm text-gray-600 mb-4">Naviguez entre toutes les pages générées :</p>
                        <div id="websitePreview" class="border-2 border-gray-300 rounded-lg bg-white overflow-auto" style="height: 600px;">
                            <div style="padding: 20px; text-align: center; color: #6b7280;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>Génération intelligente en cours...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Panneau de modifications -->
                    <div>
                        <h3 class="text-lg font-bold mb-4">⚙️ Modifications & Ajouts</h3>
                        
                        <!-- Onglets -->
                        <div class="mb-4">
                            <div class="flex flex-wrap">
                                <button class="tab-button active" onclick="switchTab('content')">📝 Contenu</button>
                                <button class="tab-button" onclick="switchTab('features')">🚀 Fonctionnalités</button>
                                <button class="tab-button" onclick="switchTab('design')">🎨 Design</button>
                            </div>
                        </div>

                        <!-- Contenu de base -->
                        <div id="content-tab" class="tab-content active">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-bold mb-2">Nom de l'entreprise</label>
                                    <input type="text" id="mainTitle" class="w-full p-3 border rounded-lg" onchange="updatePreview()">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-2">Description</label>
                                    <textarea id="subtitle" class="w-full p-3 border rounded-lg h-20" onchange="updatePreview()"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-2">Téléphone</label>
                                    <input type="tel" id="phone" class="w-full p-3 border rounded-lg" placeholder="01 23 45 67 89" onchange="updatePreview()">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-2">Adresse</label>
                                    <input type="text" id="address" class="w-full p-3 border rounded-lg" placeholder="123 Rue Example, Paris" onchange="updatePreview()">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-2">Email</label>
                                    <input type="email" id="businessEmail" class="w-full p-3 border rounded-lg" placeholder="contact@entreprise.fr" onchange="updatePreview()">
                                </div>
                            </div>
                        </div>

                        <!-- Fonctionnalités -->
                        <div id="features-tab" class="tab-content">
                            <div class="space-y-4">
                                <h4 class="font-bold text-gray-800">Ajouter des fonctionnalités :</h4>
                                <div id="additionalFeatures" class="space-y-3">
                                    <!-- Généré dynamiquement -->
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-2">Demande personnalisée</label>
                                    <textarea id="customFeatureRequest" class="w-full p-3 border rounded-lg h-20" placeholder="Ex: 'Ajouter un chat en direct', 'Système de réservation'..."></textarea>
                                    <button onclick="addCustomFeature()" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                                        <i class="fas fa-plus mr-2"></i>Ajouter
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Design -->
                        <div id="design-tab" class="tab-content">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-bold mb-2">Couleur principale</label>
                                    <input type="color" id="primaryColor" value="#3b82f6" class="w-full h-10 rounded" onchange="updatePreview()">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-2">Style de police</label>
                                    <select id="fontStyle" class="w-full p-3 border rounded-lg" onchange="updatePreview()">
                                        <option value="modern">Moderne</option>
                                        <option value="classic">Classique</option>
                                        <option value="elegant">Élégant</option>
                                    </select>
                                </div>
                                <button onclick="updatePreview()" class="w-full bg-blue-500 text-white py-3 rounded hover:bg-blue-600">
                                    🔄 Appliquer les changements
                                </button>
                            </div>
                        </div>
                        
                        <!-- Action finale -->
                        <div class="mt-8 border-t pt-6">
                            <div class="space-y-4">
                                <button onclick="downloadSite()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 px-6 rounded-lg font-bold text-lg hover:from-purple-600 hover:to-pink-600 transform hover:scale-105 transition-all">
                                    📥 TÉLÉCHARGER MON SITE (15€)
                                </button>
                                <button onclick="requestConcierge()" class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-4 px-6 rounded-lg font-bold text-lg hover:from-green-600 hover:to-blue-600 transform hover:scale-105 transition-all">
                                    🤖 SERVICE CONCIERGERIE (49€)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Variables globales
        let websiteData = {};
        let selectedTemplate = null;
        let uploadedPhotos = [];
        let selectedRequirements = {
            pages: [],
            features: [],
            customRequests: ''
        };

        // Templates disponibles
        const TEMPLATES = [
            {
                id: 'modern-clean',
                name: 'Modern Clean',
                description: 'Design épuré et moderne',
                colors: { primary: '#3b82f6', secondary: '#1e40af' },
                gradient: 'from-blue-400 to-blue-600'
            },
            {
                id: 'business-pro',
                name: 'Business Pro',
                description: 'Professionnel et élégant',
                colors: { primary: '#374151', secondary: '#111827' },
                gradient: 'from-gray-600 to-gray-800'
            },
            {
                id: 'creative-studio',
                name: 'Creative Studio',
                description: 'Créatif et artistique',
                colors: { primary: '#f59e0b', secondary: '#dc2626' },
                gradient: 'from-orange-400 to-red-500'
            },
            {
                id: 'fresh-green',
                name: 'Fresh Green',
                description: 'Nature et éco-responsable',
                colors: { primary: '#10b981', secondary: '#047857' },
                gradient: 'from-green-400 to-emerald-600'
            },
            {
                id: 'tech-innovation',
                name: 'Tech Innovation',
                description: 'High-tech et futuriste',
                colors: { primary: '#8b5cf6', secondary: '#7c3aed' },
                gradient: 'from-purple-500 to-cyan-500'
            },
            {
                id: 'elegant-gold',
                name: 'Elegant Gold',
                description: 'Luxueux et raffiné',
                colors: { primary: '#f59e0b', secondary: '#d97706' },
                gradient: 'from-yellow-400 to-amber-600'
            }
        ];

        // Configuration par secteur
        const SECTOR_CONFIG = {
            restaurant: {
                basicPages: [
                    { id: 'menu', name: 'Menu avec prix', icon: '🍽️', description: 'Carte détaillée avec tarifs' },
                    { id: 'reservation', name: 'Réservation', icon: '📅', description: 'Système de réservation de table' },
                    { id: 'gallery', name: 'Galerie photos', icon: '📸', description: 'Photos des plats et du restaurant' },
                    { id: 'reviews', name: 'Avis clients', icon: '⭐', description: 'Témoignages et évaluations' }
                ],
                features: [
                    { id: 'delivery', name: 'Livraison/Commande', icon: '🚚', description: 'Système de commande en ligne' },
                    { id: 'blog-recipes', name: 'Blog recettes', icon: '📝', description: 'Articles et recettes' },
                    { id: 'loyalty', name: 'Programme fidélité', icon: '🎁', description: 'Points et récompenses' }
                ]
            },
            ecommerce: {
                basicPages: [
                    { id: 'shop', name: 'Boutique', icon: '🛍️', description: 'Catalogue produits' },
                    { id: 'cart', name: 'Panier d\'achat', icon: '🛒', description: 'Gestion du panier' },
                    { id: 'checkout', name: 'Commande', icon: '💳', description: 'Processus d\'achat' },
                    { id: 'account', name: 'Compte client', icon: '👤', description: 'Espace client' }
                ],
                features: [
                    { id: 'payment', name: 'Paiement sécurisé', icon: '🔒', description: 'PayPal, Stripe, CB' },
                    { id: 'inventory', name: 'Gestion stock', icon: '📦', description: 'Suivi des stocks' },
                    { id: 'shipping', name: 'Expédition', icon: '📮', description: 'Calcul frais de port' }
                ]
            },
            service: {
                basicPages: [
                    { id: 'services', name: 'Services détaillés', icon: '🔧', description: 'Liste complète des services' },
                    { id: 'portfolio', name: 'Portfolio', icon: '💼', description: 'Réalisations et projets' },
                    { id: 'testimonials', name: 'Témoignages', icon: '💬', description: 'Avis clients détaillés' },
                    { id: 'quote', name: 'Devis en ligne', icon: '📋', description: 'Formulaire de devis' }
                ],
                features: [
                    { id: 'booking', name: 'Prise de RDV', icon: '📅', description: 'Calendrier de rendez-vous' },
                    { id: 'live-chat', name: 'Chat en direct', icon: '💬', description: 'Support client instantané' },
                    { id: 'certification', name: 'Certifications', icon: '🏆', description: 'Diplômes et certifications' }
                ]
            }
        };

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 IA WebGen Intelligent démarré');
            
            const form = document.getElementById('websiteForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    analyzeNeeds();
                });
            }

            setupPhotoUpload();
        });

        // Configuration upload photos
        function setupPhotoUpload() {
            const uploadArea = document.getElementById('photoUploadArea');
            const photoInput = document.getElementById('photoInput');
            
            if (!uploadArea || !photoInput) return;
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                handleFiles(e.dataTransfer.files);
            });
            
            photoInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
        }

        function handleFiles(files) {
            for (let file of files) {
                if (file.type.startsWith('image/') && file.size <= 5 * 1024 * 1024) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        uploadedPhotos.push({
                            name: file.name,
                            data: e.target.result
                        });
                        displayPhotoPreview();
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function displayPhotoPreview() {
            const preview = document.getElementById('photoPreview');
            if (!preview) return;
            
            preview.innerHTML = '';
            preview.classList.remove('hidden');
            
            uploadedPhotos.forEach((photo, index) => {
                const div = document.createElement('div');
                div.className = 'relative';
                div.innerHTML = `
                    <img src="${photo.data}" alt="${photo.name}" class="w-full h-24 object-cover rounded">
                    <button onclick="removePhoto(${index})" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 text-xs">×</button>
                `;
                preview.appendChild(div);
            });
        }

        function removePhoto(index) {
            uploadedPhotos.splice(index, 1);
            displayPhotoPreview();
            if (uploadedPhotos.length === 0) {
                document.getElementById('photoPreview').classList.add('hidden');
            }
        }

        // ANALYSE INTELLIGENTE DES BESOINS
        function analyzeNeeds() {
            const businessName = document.getElementById('businessName').value.trim();
            const description = document.getElementById('description').value.trim();
            const siteType = document.getElementById('siteType').value;
            const userEmail = document.getElementById('userEmail').value.trim();

            if (!businessName || !description || !siteType || !userEmail) {
                showNotification('❌ Veuillez remplir tous les champs !');
                return;
            }

            websiteData = {
                businessName,
                description,
                siteType,
                userEmail,
                photos: uploadedPhotos,
                mainTitle: businessName,
                subtitle: description,
                primaryColor: '#3b82f6',
                phone: '',
                address: '',
                businessEmail: ''
            };

            generateRequirementsPage();
            
            document.getElementById('mainSection').style.display = 'none';
            document.getElementById('smartRequirements').style.display = 'block';
            
            window.scrollTo(0, 0);
            showNotification('🎯 Personnalisez votre site selon vos besoins exacts !');
        }

        function generateRequirementsPage() {
            const siteType = websiteData.siteType;
            const config = SECTOR_CONFIG[siteType] || SECTOR_CONFIG.service;

            // Pages de base
            const basicPagesContainer = document.getElementById('basicPages');
            basicPagesContainer.innerHTML = '';
            
            config.basicPages.forEach(page => {
                const pageCard = document.createElement('div');
                pageCard.className = 'requirement-card';
                pageCard.onclick = () => toggleRequirement('page', page.id, pageCard);
                
                pageCard.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-3">${page.icon}</div>
                        <h4 class="font-bold text-lg mb-2">${page.name}</h4>
                        <p class="text-gray-600 text-sm">${page.description}</p>
                        <div class="mt-3">
                            <span class="inline-block bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold">
                                ✨ Recommandé
                            </span>
                        </div>
                    </div>
                `;
                
                basicPagesContainer.appendChild(pageCard);
            });

            // Fonctionnalités avancées
            const featuresContainer = document.getElementById('advancedFeatures');
            featuresContainer.innerHTML = '';
            
            config.features.forEach(feature => {
                const featureCard = document.createElement('div');
                featureCard.className = 'requirement-card';
                featureCard.onclick = () => toggleRequirement('feature', feature.id, featureCard);
                
                featureCard.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-3">${feature.icon}</div>
                        <h4 class="font-bold text-lg mb-2">${feature.name}</h4>
                        <p class="text-gray-600 text-sm">${feature.description}</p>
                        <div class="mt-3">
                            <span class="inline-block bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold">
                                🚀 Avancé
                            </span>
                        </div>
                    </div>
                `;
                
                featuresContainer.appendChild(featureCard);
            });
        }

        function toggleRequirement(type, id, element) {
            const isSelected = element.classList.contains('selected');
            
            if (isSelected) {
                element.classList.remove('selected');
                selectedRequirements[type === 'page' ? 'pages' : 'features'] = 
                    selectedRequirements[type === 'page' ? 'pages' : 'features'].filter(item => item !== id);
            } else {
                element.classList.add('selected');
                selectedRequirements[type === 'page' ? 'pages' : 'features'].push(id);
            }
        }

        function generateCustomSite() {
            selectedRequirements.customRequests = document.getElementById('customRequests').value;
            
            displayTemplates();
            
            document.getElementById('smartRequirements').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'block';
            
            window.scrollTo(0, 0);
            showNotification('🎨 Choisissez maintenant votre design !');
        }

        function displayTemplates() {
            const templateGrid = document.getElementById('templateGrid');
            if (!templateGrid) return;
            
            templateGrid.innerHTML = '';
            
            TEMPLATES.forEach((template, index) => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card bg-white rounded-xl shadow-lg p-4 border-2 border-gray-200 relative hover:shadow-xl transition-all';
                templateCard.onclick = () => selectTemplate(index);
                
                templateCard.innerHTML = `
                    <div class="mb-4">
                        <div class="bg-gradient-to-br ${template.gradient} h-20 rounded-lg flex items-center justify-center text-white font-bold text-sm">
                            <div style="text-align: center;">
                                <div style="font-weight: bold;">VOTRE SITE</div>
                                <div style="font-size: 10px;">${template.name}</div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <h4 class="font-bold text-base mb-1">${template.name}</h4>
                        <p class="text-gray-600 text-xs mb-2">${template.description}</p>
                        <div class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">
                            ✨ Gratuit
                        </div>
                    </div>
                `;
                
                templateGrid.appendChild(templateCard);
            });
        }

        function selectTemplate(index) {
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelectorAll('.template-card')[index];
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            selectedTemplate = index;
            websiteData.primaryColor = TEMPLATES[index].colors.primary;
            
            const continueBtn = document.getElementById('continueBtn');
            if (continueBtn) {
                continueBtn.disabled = false;
            }
            
            showNotification(`✅ Design "${TEMPLATES[index].name}" sélectionné !`);
        }

        function proceedWithSelectedTemplate() {
            if (selectedTemplate === null) {
                showNotification('❌ Veuillez sélectionner un design !');
                return;
            }
            
            document.getElementById('qualityTemplates').style.display = 'none';
            document.getElementById('previewSection').style.display = 'block';
            
            initializePreview();
            window.scrollTo(0, 0);
        }

        function initializePreview() {
            const previewBusinessName = document.getElementById('previewBusinessName');
            const mainTitle = document.getElementById('mainTitle');
            const subtitle = document.getElementById('subtitle');
            const primaryColor = document.getElementById('primaryColor');
            
            if (previewBusinessName) previewBusinessName.textContent = websiteData.businessName;
            if (mainTitle) mainTitle.value = websiteData.businessName;
            if (subtitle) subtitle.value = websiteData.description;
            if (primaryColor) primaryColor.value = websiteData.primaryColor;
            
            generateAdditionalFeatures();
            
            setTimeout(() => {
                updatePreview();
            }, 100);
            
            showNotification('✅ Votre site personnalisé est prêt !');
        }

        function generateAdditionalFeatures() {
            const container = document.getElementById('additionalFeatures');
            if (!container) return;
            
            const availableFeatures = [
                { id: 'newsletter', name: 'Newsletter', icon: '📧', description: 'Inscription newsletter' },
                { id: 'faq', name: 'FAQ', icon: '❓', description: 'Questions fréquentes' },
                { id: 'maps', name: 'Google Maps', icon: '🗺️', description: 'Localisation interactive' },
                { id: 'social', name: 'Réseaux sociaux', icon: '📱', description: 'Liens réseaux sociaux' },
                { id: 'seo', name: 'SEO avancé', icon: '🔍', description: 'Optimisation référencement' },
                { id: 'analytics', name: 'Analytics', icon: '📊', description: 'Suivi des visiteurs' }
            ];
            
            container.innerHTML = '';
            
            availableFeatures.forEach(feature => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between bg-gray-50 p-3 rounded-lg';
                div.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-xl mr-3">${feature.icon}</span>
                        <div>
                            <div class="font-medium">${feature.name}</div>
                            <div class="text-sm text-gray-600">${feature.description}</div>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" onchange="toggleFeature('${feature.id}')">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                `;
                container.appendChild(div);
            });
        }

        function toggleFeature(featureId) {
            console.log('Feature toggled:', featureId);
            updatePreview();
        }

        function addCustomFeature() {
            const request = document.getElementById('customFeatureRequest').value.trim();
            if (!request) {
                showNotification('❌ Décrivez la fonctionnalité à ajouter');
                return;
            }
            
            selectedRequirements.customRequests += '\n' + request;
            document.getElementById('customFeatureRequest').value = '';
            showNotification('✅ Fonctionnalité ajoutée ! Génération en cours...');
            updatePreview();
        }

        function switchTab(tabName) {
            // Cacher tous les onglets
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Afficher l'onglet sélectionné
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        function updatePreview() {
            const mainTitleEl = document.getElementById('mainTitle');
            const subtitleEl = document.getElementById('subtitle');
            const primaryColorEl = document.getElementById('primaryColor');
            const phoneEl = document.getElementById('phone');
            const addressEl = document.getElementById('address');
            const businessEmailEl = document.getElementById('businessEmail');
            
            if (!mainTitleEl || !subtitleEl || !primaryColorEl) return;
            
            const mainTitle = mainTitleEl.value || websiteData.businessName;
            const subtitle = subtitleEl.value || websiteData.description;
            const primaryColor = primaryColorEl.value;
            const phone = phoneEl ? phoneEl.value : '';
            const address = addressEl ? addressEl.value : '';
            const businessEmail = businessEmailEl ? businessEmailEl.value : '';

            websiteData.mainTitle = mainTitle;
            websiteData.subtitle = subtitle;
            websiteData.primaryColor = primaryColor;
            websiteData.phone = phone;
            websiteData.address = address;
            websiteData.businessEmail = businessEmail;

            const siteContent = generateIntelligentSiteContent();
            const previewEl = document.getElementById('websitePreview');
            
            if (previewEl && siteContent) {
                previewEl.innerHTML = siteContent;
            }
        }

        function generateIntelligentSiteContent() {
            const { mainTitle, subtitle, primaryColor } = websiteData;
            const template = TEMPLATES[selectedTemplate];
            
            if (!template) {
                return '<div style="padding: 20px; text-align: center; color: red;">Erreur: Template non trouvé</div>';
            }
            
            // Navigation intelligente basée sur les besoins
            let navItems = ['Accueil'];
            selectedRequirements.pages.forEach(pageId => {
                const pageNames = {
                    'menu': 'Menu',
                    'reservation': 'Réservation',
                    'gallery': 'Galerie',
                    'reviews': 'Avis',
                    'shop': 'Boutique',
                    'cart': 'Panier',
                    'services': 'Services',
                    'portfolio': 'Portfolio',
                    'testimonials': 'Témoignages',
                    'quote': 'Devis'
                };
                if (pageNames[pageId]) {
                    navItems.push(pageNames[pageId]);
                }
            });
            navItems.push('Contact');
            
            let content = `
                <div class="site-nav" style="background: rgba(255,255,255,0.95); border-bottom: 1px solid #e5e7eb; padding: 15px 20px; position: sticky; top: 0;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: ${primaryColor};">
                            ${mainTitle}
                        </div>
                        <div style="display: flex; gap: 20px; font-size: 0.9rem;">
                            ${navItems.map((item, index) => `
                                <span class="nav-link ${index === 0 ? 'active' : ''}" onclick="showPage('${item.toLowerCase()}')" style="color: ${index === 0 ? primaryColor : '#6b7280'}; font-weight: ${index === 0 ? 'bold' : 'normal'}; cursor: pointer;">${item}</span>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;

            // Page d'accueil intelligente
            content += `
                <div id="page-accueil" class="page-content active">
                    <div style="background: linear-gradient(135deg, ${primaryColor}, ${template.colors.secondary}); color: white; padding: 60px 20px; text-align: center;">
                        <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 20px;">${mainTitle}</h1>
                        <p style="font-size: 1.2rem; margin-bottom: 30px;">${subtitle}</p>
                        ${selectedRequirements.pages.includes('reservation') ? 
                            '<button style="background: rgba(255,255,255,0.2); padding: 15px 30px; border: none; border-radius: 25px; color: white; font-weight: bold; cursor: pointer;">Réserver maintenant</button>' :
                            selectedRequirements.pages.includes('shop') ?
                            '<button style="background: rgba(255,255,255,0.2); padding: 15px 30px; border: none; border-radius: 25px; color: white; font-weight: bold; cursor: pointer;">Voir la boutique</button>' :
                            '<button style="background: rgba(255,255,255,0.2); padding: 15px 30px; border: none; border-radius: 25px; color: white; font-weight: bold; cursor: pointer;">Nous contacter</button>'
                        }
                    </div>
                    
                    ${uploadedPhotos.length > 0 ? `
                        <div style="padding: 60px 20px; background: white;">
                            <h2 style="font-size: 2rem; color: ${primaryColor}; text-align: center; margin-bottom: 40px;">📸 Nos Réalisations</h2>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; max-width: 1000px; margin: 0 auto;">
                                ${uploadedPhotos.slice(0, 6).map(photo => `
                                    <img src="${photo.data}" alt="${photo.name}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div style="padding: 60px 20px; background: #f8fafc;">
                        <h2 style="font-size: 2rem; color: ${primaryColor}; text-align: center; margin-bottom: 40px;">Pourquoi nous choisir ?</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; max-width: 800px; margin: 0 auto;">
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 3rem; margin-bottom: 15px;">⚡</div>
                                <h3 style="color: ${primaryColor}; margin-bottom: 10px;">Rapidité</h3>
                                <p style="color: #666;">Service rapide et efficace</p>
                            </div>
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 3rem; margin-bottom: 15px;">🏆</div>
                                <h3 style="color: ${primaryColor}; margin-bottom: 10px;">Qualité</h3>
                                <p style="color: #666;">Excellence garantie</p>
                            </div>
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 3rem; margin-bottom: 15px;">💯</div>
                                <h3 style="color: ${primaryColor}; margin-bottom: 10px;">Satisfaction</h3>
                                <p style="color: #666;">Clients satisfaits</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Générer les pages sélectionnées
            content += generateSelectedPages();

            // Page contact
            content += generateContactPage();

            // Footer
            content += `
                <footer style="background: #1f2937; color: white; padding: 40px 20px; text-align: center;">
                    <h3 style="color: ${primaryColor}; margin-bottom: 20px;">${mainTitle}</h3>
                    <p style="margin-bottom: 20px;">Votre partenaire de confiance</p>
                    <p style="color: #9ca3af;">© ${new Date().getFullYear()} ${mainTitle}. Tous droits réservés.</p>
                </footer>
            `;

            // Script de navigation
            content += `
                <script>
                    function showPage(pageId) {
                        document.querySelectorAll('.page-content').forEach(page => {
                            page.style.display = 'none';
                        });
                        
                        const selectedPage = document.getElementById('page-' + pageId);
                        if (selectedPage) {
                            selectedPage.style.display = 'block';
                        }
                        
                        document.querySelectorAll('.nav-link').forEach(link => {
                            link.style.color = '#6b7280';
                            link.style.fontWeight = 'normal';
                        });
                        
                        event.target.style.color = '${primaryColor}';
                        event.target.style.fontWeight = 'bold';
                        
                        document.querySelector('#websitePreview').scrollTop = 0;
                    }
                </script>
            `;

            return content;
        }

        function generateSelectedPages() {
            const { primaryColor, mainTitle } = websiteData;
            let content = '';

            // Générer les pages selon les besoins sélectionnés
            selectedRequirements.pages.forEach(pageId => {
                switch(pageId) {
                    case 'menu':
                        content += `
                            <div id="page-menu" class="page-content" style="display: none;">
                                <div style="padding: 60px 20px; background: white;">
                                    <h1 style="font-size: 2.5rem; color: ${primaryColor}; text-align: center; margin-bottom: 50px;">🍽️ Notre Menu</h1>
                                    <div style="max-width: 800px; margin: 0 auto;">
                                        <div style="background: #f8fafc; padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                                            <h3 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 20px;">🥗 Entrées</h3>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dotted #ccc;">
                                                <span>Salade César</span><strong style="color: ${primaryColor};">12€</strong>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; padding-bottom: 10px; border-bottom: 1px dotted #ccc;">
                                                <span>Carpaccio de saumon</span><strong style="color: ${primaryColor};">15€</strong>
                                            </div>
                                        </div>
                                        <div style="background: #f8fafc; padding: 30px; border-radius: 15px;">
                                            <h3 style="color: ${primaryColor}; font-size: 1.5rem; margin-bottom: 20px;">🥩 Plats</h3>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dotted #ccc;">
                                                <span>Filet de bœuf</span><strong style="color: ${primaryColor};">28€</strong>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; padding-bottom: 10px; border-bottom: 1px dotted #ccc;">
                                                <span>Saumon grillé</span><strong style="color: ${primaryColor};">22€</strong>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;

                    case 'shop':
                        content += `
                            <div id="page-boutique" class="page-content" style="display: none;">
                                <div style="padding: 60px 20px; background: white;">
                                    <h1 style="font-size: 2.5rem; color: ${primaryColor}; text-align: center; margin-bottom: 50px;">🛍️ Notre Boutique</h1>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; max-width: 1000px; margin: 0 auto;">
                                        <div style="background: #f8fafc; padding: 20px; border-radius: 15px; text-align: center;">
                                            <div style="width: 100%; height: 150px; background: #e5e7eb; border-radius: 10px; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; font-size: 3rem;">📦</div>
                                            <h3 style="color: ${primaryColor}; font-weight: bold; margin-bottom: 10px;">Produit 1</h3>
                                            <p style="color: #6b7280; margin-bottom: 15px;">Description du produit</p>
                                            <div style="font-size: 1.5rem; font-weight: bold; color: ${primaryColor}; margin-bottom: 15px;">29€</div>
                                            <button style="background: ${primaryColor}; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;">Ajouter au panier</button>
                                        </div>
                                        <div style="background: #f8fafc; padding: 20px; border-radius: 15px; text-align: center;">
                                            <div style="width: 100%; height: 150px; background: #e5e7eb; border-radius: 10px; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; font-size: 3rem;">📦</div>
                                            <h3 style="color: ${primaryColor}; font-weight: bold; margin-bottom: 10px;">Produit 2</h3>
                                            <p style="color: #6b7280; margin-bottom: 15px;">Description du produit</p>
                                            <div style="font-size: 1.5rem; font-weight: bold; color: ${primaryColor}; margin-bottom: 15px;">39€</div>
                                            <button style="background: ${primaryColor}; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;">Ajouter au panier</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;

                    case 'services':
                        content += `
                            <div id="page-services" class="page-content" style="display: none;">
                                <div style="padding: 60px 20px; background: white;">
                                    <h1 style="font-size: 2.5rem; color: ${primaryColor}; text-align: center; margin-bottom: 50px;">🔧 Nos Services</h1>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1000px; margin: 0 auto;">
                                        <div style="background: #f8fafc; padding: 30px; border-radius: 15px; text-align: center;">
                                            <div style="font-size: 3rem; margin-bottom: 20px;">⚡</div>
                                            <h3 style="color: ${primaryColor}; font-weight: bold; margin-bottom: 15px;">Service Express</h3>
                                            <p style="color: #6b7280; margin-bottom: 20px;">Service rapide pour vos urgences</p>
                                            <div style="font-size: 1.5rem; font-weight: bold; color: ${primaryColor};">À partir de 50€</div>
                                        </div>
                                        <div style="background: #f8fafc; padding: 30px; border-radius: 15px; text-align: center;">
                                            <div style="font-size: 3rem; margin-bottom: 20px;">🏆</div>
                                            <h3 style="color: ${primaryColor}; font-weight: bold; margin-bottom: 15px;">Service Premium</h3>
                                            <p style="color: #6b7280; margin-bottom: 20px;">Notre service haut de gamme</p>
                                            <div style="font-size: 1.5rem; font-weight: bold; color: ${primaryColor};">À partir de 100€</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                }
            });

            return content;
        }

        function generateContactPage() {
            const { primaryColor, phone, address, businessEmail, mainTitle } = websiteData;
            
            return `
                <div id="page-contact" class="page-content" style="display: none;">
                    <div style="padding: 60px 20px; background: white;">
                        <div style="max-width: 1000px; margin: 0 auto;">
                            <h1 style="font-size: 2.5rem; color: ${primaryColor}; text-align: center; margin-bottom: 50px;">📞 Contact</h1>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 50px;">
                                <!-- Coordonnées -->
                                <div style="background: #f8fafc; padding: 40px; border-radius: 15px;">
                                    <h2 style="color: ${primaryColor}; font-size: 1.8rem; margin-bottom: 30px;">Nos Coordonnées</h2>
                                    <div style="space-y: 20px;">
                                        ${phone ? `
                                            <div style="margin-bottom: 20px;">
                                                <div style="font-size: 1.5rem; margin-bottom: 5px;">📱</div>
                                                <strong style="color: ${primaryColor};">Téléphone</strong>
                                                <p>${phone}</p>
                                            </div>
                                        ` : ''}
                                        ${businessEmail ? `
                                            <div style="margin-bottom: 20px;">
                                                <div style="font-size: 1.5rem; margin-bottom: 5px;">📧</div>
                                                <strong style="color: ${primaryColor};">Email</strong>
                                                <p>${businessEmail}</p>
                                            </div>
                                        ` : ''}
                                        ${address ? `
                                            <div style="margin-bottom: 20px;">
                                                <div style="font-size: 1.5rem; margin-bottom: 5px;">📍</div>
                                                <strong style="color: ${primaryColor};">Adresse</strong>
                                                <p>${address}</p>
                                            </div>
                                        ` : ''}
                                        <div>
                                            <div style="font-size: 1.5rem; margin-bottom: 5px;">⏰</div>
                                            <strong style="color: ${primaryColor};">Horaires</strong>
                                            <p>Lun-Ven: 9h-18h<br>Sam: 9h-12h</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Formulaire -->
                                <div>
                                    <h2 style="color: ${primaryColor}; font-size: 1.8rem; margin-bottom: 30px;">Nous écrire</h2>
                                    <form style="space-y: 20px;">
                                        <div style="margin-bottom: 20px;">
                                            <label style="display: block; font-weight: bold; margin-bottom: 5px;">Nom *</label>
                                            <input type="text" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px;" required>
                                        </div>
                                        <div style="margin-bottom: 20px;">
                                            <label style="display: block; font-weight: bold; margin-bottom: 5px;">Email *</label>
                                            <input type="email" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px;" required>
                                        </div>
                                        <div style="margin-bottom: 20px;">
                                            <label style="display: block; font-weight: bold; margin-bottom: 5px;">Message *</label>
                                            <textarea rows="5" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; resize: vertical;" required></textarea>
                                        </div>
                                        <button type="submit" style="background: ${primaryColor}; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                            📨 Envoyer
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Navigation
        function goBackToMain() {
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'none';
            document.getElementById('smartRequirements').style.display = 'none';
            document.getElementById('mainSection').style.display = 'block';
            window.scrollTo(0, 0);
        }

        function goBackToRequirements() {
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'none';
            document.getElementById('smartRequirements').style.display = 'block';
            window.scrollTo(0, 0);
        }

        function goBackToTemplates() {
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('qualityTemplates').style.display = 'block';
            window.scrollTo(0, 0);
        }

        // Actions finales
        function downloadSite() {
            showNotification('📥 Préparation du téléchargement...');
            
            const fullSiteHTML = generateFullSiteHTML();
            
            const blob = new Blob([fullSiteHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${websiteData.businessName.replace(/\s+/g, '-')}-site-personnalise.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('✅ Site téléchargé avec succès !');
        }

        function requestConcierge() {
            const message = `🤖 Demande de Service Conciergerie\n\n` +
                          `Entreprise: ${websiteData.businessName}\n` +
                          `Secteur: ${websiteData.siteType}\n` +
                          `Pages demandées: ${selectedRequirements.pages.join(', ')}\n` +
                          `Fonctionnalités: ${selectedRequirements.features.join(', ')}\n` +
                          `Demandes spéciales: ${selectedRequirements.customRequests}\n\n` +
                          `Nous nous occupons de tout : domaine, hébergement, mise en ligne !`;
            
            alert(message);
            showNotification('🤖 Demande de conciergerie envoyée !');
        }

        function generateFullSiteHTML() {
            const template = TEMPLATES[selectedTemplate];
            const { mainTitle } = websiteData;
            
            return `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${mainTitle}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .nav-link { cursor: pointer; transition: all 0.3s; }
        .nav-link:hover { transform: translateY(-2px); }
        .page-content { display: none; }
        .page-content.active { display: block; }
    </style>
</head>
<body>
    ${generateIntelligentSiteContent()}
</body>
</html>`;
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            if (notification && text) {
                text.textContent = message;
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 4000);
            }
        }
    </script>
</body>
</html>
